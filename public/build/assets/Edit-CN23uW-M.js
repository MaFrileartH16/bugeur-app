import{b as E,j as r,q as d,S as v,o as u,c as _}from"./app-D3R6lm7F.js";import{P as S}from"./PageHeadings-psyFkYvz.js";import{a as y,A as D,C as I,T as U}from"./AppLayout-B3HIGmJ6.js";import{I as w}from"./IconMail-BJ4Rn4LR.js";import{I as A}from"./IconKey-C1XLFxFD.js";import{G as t}from"./Grid-C0iy7L3J.js";import{T as P}from"./Text-BxAYQD4o.js";import{I as T}from"./IconCornerDownLeft-DgwkMie4.js";const N=i=>{const{user:c}=i.auth,o=i.user,e=E({full_name:o.full_name||"",email:o.email||"",role:o.role.toLowerCase().replace(/\s+/g,"_")||""}),n=(a,s)=>s?a==="email"&&!s.endsWith("@bugeur.id")?"Email must use @bugeur.id.":null:`${a.replace("_"," ").replace(/^\w/,l=>l.toUpperCase())} is required.`,m=a=>{const s=a.target.value;e.setData("full_name",s);const l=n("full_name",s);l?e.setError("full_name",l):e.clearErrors("full_name")},p=a=>{const s=a.target.value;e.setData("email",s);const l=n("email",s);l?e.setError("email",l):e.clearErrors("email")},h=a=>{e.setData("role",a);const s=n("role",a);s?e.setError("role",s):e.clearErrors("role")},f=a=>{a.preventDefault(),e.patch(route("users.update",o))},g=[{label:"Full Name",value:e.data.full_name,onChange:m,error:e.errors.full_name,placeholder:"e.g., John Doe",description:"Update the user’s full name (e.g., first and last name).",leftSection:r.jsx(y,{}),component:d},{label:"Email Address",value:e.data.email,onChange:p,error:e.errors.email,placeholder:"e.g., johndoe@bugeur.id",description:"Provide a valid email address ending with @bugeur.id.",leftSection:r.jsx(w,{}),component:d},{label:"Role",defaultValue:e.data.role.toLowerCase().replace(/\s+/g,"_"),onChange:h,error:e.errors.role,placeholder:"Select user’s role",description:"Assign the user a role: Project Manager, Developer, or QA.",leftSection:r.jsx(A,{}),component:v,data:[{value:"project_manager",label:"Project Manager"},{value:"developer",label:"Developer"},{value:"quality_assurance",label:"Quality Assurance"}]}],x=Object.keys(e.errors).length>0,j=!e.data.full_name||!e.data.email||!e.data.role;return r.jsx("form",{onSubmit:f,children:r.jsx(D,{title:"Edit User",user:c,children:r.jsxs(I,{flex:1,size:"xl",w:"100%",py:32,children:[r.jsx(S,{title:"Edit User",description:"Make changes to the user's details, including their role and email address.",breadcrumbs:[{label:"Users",onClick:()=>u.get(route("users.index",{page:1}))},{label:"Edit",onClick:()=>u.get(route("users.edit",o.id))}]}),r.jsxs(t,{gutter:32,justify:"flex-end",children:[g.map(({component:a,label:s,description:l,...b},C)=>r.jsx(t.Col,{span:{base:12},children:r.jsxs(t,{gutter:{base:8,sm:0},align:"start",children:[r.jsx(t.Col,{span:{base:12,sm:4},children:r.jsx(U,{order:5,children:s})}),r.jsxs(t.Col,{span:{base:12,sm:8},children:[r.jsx(a,{...b}),l&&r.jsx(P,{size:"xs",color:"dimmed",mt:8,children:l})]})]})},C)),r.jsx(t.Col,{span:{base:12,sm:8,smOffset:4},children:r.jsx(_,{type:"submit",fullWidth:!0,leftSection:r.jsx(T,{}),disabled:e.processing||x||j,loading:e.processing,children:"Save Changes"})})]})]})})})};export{N as default};
