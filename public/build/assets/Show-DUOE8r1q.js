import{r as W,a6 as re,a7 as ae,a8 as ce,f as R,u as I,F as le,a9 as de,j as e,B as C,s as V,U as he,J as ue,i as me,a as pe,aa as ge,c as fe,v as xe,D as je,G as K,x as Q,h as T,L as b,d as ve}from"./app-D1ROa2dk.js";import{P as ye,G as k}from"./PageHeadings-CXlcB1tZ.js";import{i as _e,j as we,a as g,S as _,A as Ae,h as M,T as q,D as Ce,B as be,g as B}from"./AppLayout-6WbUBhn6.js";import{A as X}from"./AccordionChevron-B9vyMcwf.js";import{I as Se}from"./IconPlus-BLphxDSX.js";function J(o,t){return s=>{if(typeof s!="string"||s.trim().length===0)throw new Error(t);return`${o}-${s}`}}function Ie(o){if(!o||typeof o=="string")return 0;const t=o/36;return Math.round((4+15*t**.25+t/5)*10)}function E(o){return o!=null&&o.current?o.current.scrollHeight:"auto"}const S=typeof window<"u"&&window.requestAnimationFrame;function Pe({transitionDuration:o,transitionTimingFunction:t="ease",onTransitionEnd:s=()=>{},opened:a}){const l=W.useRef(null),n=0,f={display:"none",height:0,overflow:"hidden"},[u,m]=W.useState(a?{}:f),d=c=>{ce.flushSync(()=>m(c))},r=c=>{d(h=>({...h,...c}))};function j(c){const h=o||Ie(c);return{transition:`height ${h}ms ${t}, opacity ${h}ms ${t}`}}re(()=>{typeof S=="function"&&S(a?()=>{r({willChange:"height",display:"block",overflow:"hidden"}),S(()=>{const c=E(l);r({...j(c),height:c})})}:()=>{const c=E(l);r({...j(c),willChange:"height",height:c}),S(()=>r({height:n,overflow:"hidden"}))})},[a]);const w=c=>{if(!(c.target!==l.current||c.propertyName!=="height"))if(a){const h=E(l);h===u.height?d({}):r({height:h}),s()}else u.height===n&&(d(f),s())};function x({style:c={},refKey:h="ref",...i}={}){const A=i[h];return{"aria-hidden":!a,...i,[h]:ae(l,A),onTransitionEnd:w,style:{boxSizing:"border-box",...c,...u}}}return x}const $e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Y=R((o,t)=>{const{children:s,in:a,transitionDuration:l,transitionTimingFunction:n,style:f,onTransitionEnd:u,animateOpacity:m,...d}=I("Collapse",$e,o),r=le(),j=de(),x=(r.respectReducedMotion?j:!1)?0:l,c=Pe({opened:a,transitionDuration:x,transitionTimingFunction:n,onTransitionEnd:u});return x===0?a?e.jsx(C,{...d,children:s}):null:e.jsx(C,{...c({style:{opacity:a||!m?1:0,transition:m?`opacity ${x}ms ${n}`:"none",..._e(f,r)},ref:t,...d}),children:s})});Y.displayName="@mantine/core/Collapse";const[De,H]=V("Accordion component was not found in the tree"),[Re,Z]=V("Accordion.Item component was not found in the tree");var P={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Ne={},G=R((o,t)=>{const{classNames:s,className:a,style:l,styles:n,vars:f,chevron:u,icon:m,onClick:d,onKeyDown:r,children:j,disabled:w,mod:x,...c}=I("AccordionControl",Ne,o),{value:h}=Z(),i=H(),A=i.isItemActive(h),L=typeof i.order=="number",N=`h${i.order}`,$=e.jsxs(he,{...c,...i.getStyles("control",{className:a,classNames:s,style:l,styles:n,variant:i.variant}),unstyled:i.unstyled,mod:["accordion-control",{active:A,"chevron-position":i.chevronPosition,disabled:w},x],ref:t,onClick:D=>{d==null||d(D),i.onChange(h)},type:"button",disabled:w,"aria-expanded":A,"aria-controls":i.getRegionId(h),id:i.getControlId(h),onKeyDown:we({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:i.loop,orientation:"vertical",onKeyDown:r}),children:[e.jsx(C,{component:"span",mod:{rotate:!i.disableChevronRotation&&A,position:i.chevronPosition},...i.getStyles("chevron",{classNames:s,styles:n}),children:u||i.chevron}),e.jsx("span",{...i.getStyles("label",{classNames:s,styles:n}),children:j}),m&&e.jsx(C,{component:"span",mod:{"chevron-position":i.chevronPosition},...i.getStyles("icon",{classNames:s,styles:n}),children:m})]});return L?e.jsx(N,{...i.getStyles("itemTitle",{classNames:s,styles:n}),children:$}):$});G.displayName="@mantine/core/AccordionControl";G.classes=P;const ze={},U=R((o,t)=>{const{classNames:s,className:a,style:l,styles:n,vars:f,value:u,mod:m,...d}=I("AccordionItem",ze,o),r=H();return e.jsx(Re,{value:{value:u},children:e.jsx(C,{ref:t,mod:[{active:r.isItemActive(u)},m],...r.getStyles("item",{className:a,classNames:s,styles:n,style:l,variant:r.variant}),...d})})});U.displayName="@mantine/core/AccordionItem";U.classes=P;const Te={},F=R((o,t)=>{const{classNames:s,className:a,style:l,styles:n,vars:f,children:u,...m}=I("AccordionPanel",Te,o),{value:d}=Z(),r=H();return e.jsx(Y,{ref:t,...r.getStyles("panel",{className:a,classNames:s,style:l,styles:n}),...m,in:r.isItemActive(d),transitionDuration:r.transitionDuration??200,role:"region",id:r.getRegionId(d),"aria-labelledby":r.getControlId(d),children:e.jsx("div",{...r.getStyles("content",{classNames:s,styles:n}),children:u})})});F.displayName="@mantine/core/AccordionPanel";F.classes=P;const ke={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:e.jsx(X,{})},Me=fe((o,{transitionDuration:t,chevronSize:s,radius:a})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":s===void 0?void 0:xe(s),"--accordion-radius":a===void 0?void 0:je(a)}}));function p(o){const t=I("Accordion",ke,o),{classNames:s,className:a,style:l,styles:n,unstyled:f,vars:u,children:m,multiple:d,value:r,defaultValue:j,onChange:w,id:x,loop:c,transitionDuration:h,disableChevronRotation:i,chevronPosition:A,chevronSize:L,order:N,chevron:$,variant:D,radius:Ee,...ee}=t,z=ue(x),[v,te]=me({value:r,defaultValue:j,finalValue:d?[]:null,onChange:w}),ne=y=>Array.isArray(v)?v.includes(y):y===v,oe=y=>{const se=Array.isArray(v)?v.includes(y)?v.filter(ie=>ie!==y):[...v,y]:y===v?null:y;te(se)},O=pe({name:"Accordion",classes:P,props:t,className:a,style:l,classNames:s,styles:n,unstyled:f,vars:u,varsResolver:Me});return e.jsx(De,{value:{isItemActive:ne,onChange:oe,getControlId:J(`${z}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:J(`${z}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:h,disableChevronRotation:i,chevronPosition:A,order:N,chevron:$,loop:c,getStyles:O,variant:D,unstyled:f},children:e.jsx(C,{...O("root"),id:z,...ee,variant:D,"data-accordion":!0,children:m})})}const Be=o=>o;p.extend=Be;p.withProps=ge(p);p.classes=P;p.displayName="@mantine/core/Accordion";p.Item=U;p.Panel=F;p.Control=G;p.Chevron=X;const Oe=o=>{var l;const{project:t,auth:s}=o;console.log(t.bugs);const a=t.bugs.map(n=>e.jsxs(p.Item,{value:n.id,children:[e.jsx(p.Control,{children:e.jsx(K,{children:e.jsx(g,{children:n.title})})}),e.jsx(p.Panel,{children:e.jsxs(_,{gap:"sm",children:[e.jsx(g,{children:n.description}),e.jsxs(g,{c:"dimmed",size:"sm",children:["Assignee: ",n.assignee.full_name]}),e.jsxs(g,{c:"dimmed",size:"sm",children:["Created at: ",new Date(n.created_at).toLocaleString()]}),n.evidence_image&&e.jsx(Q,{src:n.evidence_image,alt:"Evidence",width:200})]})})]},n.id));return e.jsxs(Ae,{title:"Project Details",user:s.user,children:[e.jsx(ye,{breadcrumbs:[{label:"Projects",onClick:()=>T.get(route("projects.index"))},{label:"Details",onClick:()=>T.get(route("projects.show",t.id))}]}),t.cover_photo_path?e.jsx(Q,{src:t.cover_photo_path,h:320}):e.jsx(b,{h:320,w:"100%",styles:{placeholder:{fontSize:26}},children:M(t.title)}),e.jsxs(k,{mt:64,children:[e.jsxs(k.Col,{span:9,children:[e.jsx(q,{order:3,lineClamp:1,children:t.title}),e.jsx(g,{c:"gray",mt:16,children:t.description}),e.jsxs(_,{children:[e.jsxs(K,{mt:32,justify:"space-between",align:"start",children:[e.jsx(q,{order:4,children:"Bugs"}),o.auth.user.role==="Quality Assurance"&&e.jsx(ve,{leftSection:e.jsx(Se,{}),display:{base:"none",xs:"block"},onClick:()=>T.get(route("projects.bugs.create",t)),children:"Create Bug"})]}),t.bugs.length>0?e.jsx(p,{defaultValue:(l=t.bugs[0])==null?void 0:l.id,children:a}):e.jsx(_,{align:"center",justify:"center",h:200,children:e.jsx(g,{c:"dimmed",size:"lg",children:"No bugs found."})})]})]}),e.jsx(Ce,{orientation:"vertical",mx:16}),e.jsx(k.Col,{span:2,children:e.jsxs(_,{gap:32,w:320,children:[e.jsxs(_,{gap:8,children:[e.jsx(g,{fw:500,size:"sm",children:"Created on"}),e.jsxs(g,{c:"gray",children:[new Date(t.created_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})," "]})]}),e.jsxs(_,{gap:8,children:[e.jsx(g,{fw:500,size:"sm",children:"Status"}),e.jsx(be,{color:t.deleted_at?"red":"green",variant:"light",children:t.deleted_at?"Inactive":"Active"})]}),e.jsxs(_,{gap:8,children:[e.jsx(g,{fw:500,size:"sm",children:"Manager"}),e.jsx(B,{label:t.manager.full_name,withArrow:!0,children:e.jsx(b,{size:48,color:"orange",src:t.manager.profile_photo_path||void 0,children:!t.manager.profile_photo_path&&M(t.manager.full_name)})})]}),e.jsxs(_,{gap:8,children:[e.jsx(g,{fw:500,size:"sm",children:"Members"}),e.jsxs(b.Group,{children:[t.working_on.slice(0,3).map(n=>e.jsx(B,{label:`${n.full_name} (${n.role})`,children:e.jsx(b,{size:48,color:n.role==="Developer"?"lime":n.role==="Quality Assurance"?"cyan":"gray",src:t.manager.profile_photo_path||void 0,children:!t.manager.profile_photo_path&&M(n.full_name)})},n.id)),t.working_on.length>3&&e.jsx(B,{label:t.working_on.slice(3).map(n=>`${n.full_name} (${n.role})`).join(", "),multiline:!0,width:200,children:e.jsxs(b,{color:"ghost",size:48,children:["+",t.working_on.length-3]})})]})]})]})})]})]})};export{Oe as default};
