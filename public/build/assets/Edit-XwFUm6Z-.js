import{b as _,j as e,h as d,d as E}from"./app-D1ROa2dk.js";import{M as v}from"./MultiSelect-DmQ7hl-C.js";import{P as S,G as a}from"./PageHeadings-CXlcB1tZ.js";import{S as I}from"./Select-CesD06S8.js";import{T as y,I as D}from"./Textarea-U4dTWsE9.js";import{T}from"./TextInput-DoMuMr3T.js";import{A,T as l,e as M,b as w}from"./AppLayout-6WbUBhn6.js";import{I as P}from"./IconUsers-BWlCuh-V.js";import{I as k}from"./IconCornerDownLeft-WUnmPxyi.js";import"./Textarea-BE-ZIgh7.js";const O=c=>{console.log(c);const{user:m}=c.auth,{project:o,managers:p,users:h}=c,r=_({title:o.title||"",description:o.description||"",manager_id:o.manager_id||"",team_members:o.working_on.map(t=>t.id)||[]}),i=(t,s)=>!s||Array.isArray(s)&&s.length===0?`${t.replace("_id","").replace("_"," ").replace(/\b\w/g,n=>n.toUpperCase())} is required.`:null,j=t=>{const s=t.target.value;r.setData("title",s);const n=i("title",s);n?r.setError("title",n):r.clearErrors("title")},g=t=>{const s=t.target.value;r.setData("description",s);const n=i("description",s);n?r.setError("description",n):r.clearErrors("description")},b=t=>{r.setData("manager_id",t);const s=i("manager_id",t);s?r.setError("manager_id",s):r.clearErrors("manager_id")},u=t=>{r.setData("team_members",t);const s=i("team_members",t);s?r.setError("team_members",s):r.clearErrors("team_members")},x=t=>{t.preventDefault();const s=i("team_members",r.data.team_members);if(s){r.setError("team_members",s);return}r.put(route("projects.update",{project:o}),{onFinish:()=>r.reset()})},f=Object.keys(r.errors).length>0,C=!r.data.title||!r.data.description||!r.data.manager_id||r.data.team_members.length===0;return e.jsx("form",{onSubmit:x,children:e.jsxs(A,{title:"Edit Project",user:m,children:[e.jsx(S,{title:"Edit Project",description:"Modify the details of the project to ensure it reflects the latest requirements.",breadcrumbs:[{label:"Projects",onClick:()=>d.get(route("projects.index"))},{label:"Edit",onClick:()=>d.get(route("projects.edit",o.id))}]}),e.jsxs(a,{gutter:32,justify:"flex-end",children:[e.jsx(a.Col,{span:{base:12},children:e.jsxs(a,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(a.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Title"})}),e.jsx(a.Col,{span:{base:12,sm:8},children:e.jsx(T,{value:r.data.title,onChange:j,error:r.errors.title,placeholder:"Enter the project's title, e.g., Website Redesign",leftSection:e.jsx(M,{}),description:"Provide a concise and descriptive title for the project."})})]})}),e.jsx(a.Col,{span:{base:12},children:e.jsxs(a,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(a.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Description"})}),e.jsx(a.Col,{span:{base:12,sm:8},children:e.jsx(y,{value:r.data.description,onChange:g,error:r.errors.description,placeholder:"Describe the project's objectives and scope",leftSection:e.jsx(D,{}),minRows:4,description:`Include key details and objectives to help the team understand
                  the project.`})})]})}),e.jsx(a.Col,{span:{base:12},children:e.jsxs(a,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(a.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Manager"})}),e.jsx(a.Col,{span:{base:12,sm:8},children:e.jsx(I,{value:r.data.manager_id,onChange:b,error:r.errors.manager_id,placeholder:"Select a project manager",leftSection:e.jsx(w,{}),data:p.map(t=>({value:t.id,label:t.full_name})),description:"Assign a manager who will oversee the project."})})]})}),e.jsx(a.Col,{span:{base:12},children:e.jsxs(a,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(a.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Team Members"})}),e.jsx(a.Col,{span:{base:12,sm:8},children:e.jsx(v,{value:r.data.team_members,onChange:u,error:r.errors.team_members,placeholder:"Select team members",leftSection:e.jsx(P,{}),data:h.map(t=>({value:t.id,label:`${t.full_name} (${t.role})`})),description:`Include at least one Developer and one Quality Assurance
                  member.`})})]})}),e.jsx(a.Col,{span:{base:12,sm:8},align:"end",children:e.jsx(E,{type:"submit",leftSection:e.jsx(k,{}),disabled:r.processing||f||C,loading:r.processing,children:"Save Changes"})})]})]})})};export{O as default};
