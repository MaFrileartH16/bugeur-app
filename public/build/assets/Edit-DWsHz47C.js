import{a as b,j as e,G as C,X as P,b as p}from"./app-BpAUGdmq.js";import{P as _}from"./PageHeadings-Ci2Bal-C.js";import{P as v}from"./PasswordInput-Cwt5iHn3.js";import{T as i}from"./TextInput-D0mzV3YP.js";import{c as y,A as w,T as l,a as E,b as I}from"./AppLayout-gEqekIuP.js";import{G as s}from"./Grid-DFaESEyC.js";import{F as S}from"./FileButton-Cctwg_Wh.js";import{I as M}from"./IconKey-CnB_oJCA.js";import{I as k,a as G}from"./IconPassword-FGhIAzTz.js";import{I as U}from"./IconCornerDownLeft-VZliz8Yz.js";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F=y("outline","photo-up","IconPhotoUp",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526",key:"svg-3"}],["path",{d:"M19 22v-6",key:"svg-4"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-5"}]]);const J=d=>{const{user:o}=d.auth,r=b({_method:"put",profile_photo_path:o.profile_photo_path||"",full_name:o.full_name||"",email:o.email||"",password:""}),c=a=>a&&!["image/png","image/jpeg","image/jpg"].includes(a.type)?"Only PNG, JPEG, and JPG formats are allowed.":a&&a.size>2*1024*1024?"File size must not exceed 2 MB.":null,h=a=>{const t=c(a);if(t){r.setError("profile_photo_path",t);return}r.setData("profile_photo_path",a),r.clearErrors("profile_photo_path")},u=a=>a?a.endsWith("@bugeur.id")?null:"Email must end with @bugeur.id.":"Email is required.",m=a=>a&&a.length<8?"Password must be at least 8 characters.":null,g=a=>{const t=a.target.value;r.setData("email",t);const n=u(t);n?r.setError("email",n):r.clearErrors("email")},j=a=>{const t=a.target.value;r.setData("password",t);const n=m(t);n?r.setError("password",n):r.clearErrors("password")},x=a=>{a.preventDefault(),r.post(route("profile.update",o),{onFinish:()=>r.reset("password")})},f=Object.keys(r.errors).length>0;return e.jsx("form",{onSubmit:x,children:e.jsxs(w,{title:"Edit Profile",user:o,notification:d.notification,children:[e.jsx(_,{title:"Edit Profile",description:"Update your profile details."}),e.jsxs(s,{gutter:16,justify:"flex-end",children:[e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Profile Photo"})}),e.jsxs(s.Col,{span:{base:12,sm:8},children:[e.jsxs(C,{align:"flex-start",spacing:"sm",children:[e.jsx(P,{src:r.data.profile_photo_path instanceof File?URL.createObjectURL(r.data.profile_photo_path):r.data.profile_photo_path,alt:"Profile Photo",size:80}),e.jsx(S,{onChange:h,accept:"image/png,image/jpeg,image/jpg",children:a=>e.jsx(p,{variant:"subtle",...a,leftSection:e.jsx(F,{}),children:"Upload"})})]}),r.errors.profile_photo_path&&e.jsx(E,{color:"red",size:"sm",children:r.errors.profile_photo_path})]})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Full Name"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(i,{value:r.data.full_name,placeholder:"Enter your full name",description:"Your name cannot be changed. Contact support if you need to update it.",leftSection:e.jsx(I,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Role"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(i,{value:o.role,placeholder:"Your role",description:"This is your system role and cannot be changed.",leftSection:e.jsx(M,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Email"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(i,{value:r.data.email,onChange:g,error:r.errors.email,placeholder:"example@bugeur.id",description:"Your email address is tied to your account and cannot be changed.",leftSection:e.jsx(k,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"New Password"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(v,{value:r.data.password,onChange:j,error:r.errors.password,placeholder:"Enter a new password",description:"Password must be at least 8 characters long.",leftSection:e.jsx(G,{})})})]})}),e.jsx(s.Col,{span:{base:12,sm:8},align:"end",children:e.jsx(p,{type:"submit",leftSection:e.jsx(U,{}),disabled:r.processing||f,loading:r.processing,children:"Save Changes"})})]})]})})};export{J as default};
