import{r as c,j as e,M as $,c as d,J as y,o as a,q as F,X as Q,G as N,a0 as q}from"./app-D3R6lm7F.js";import{P as V}from"./PageHeadings-psyFkYvz.js";import{u as H,A as J,C as O,F as R,e as X,M as n,T as h,B as K,S as C}from"./AppLayout-B3HIGmJ6.js";import{T as u}from"./Text-BxAYQD4o.js";import{S as W,I as w,C as x}from"./IconPlus-D7DYjHcm.js";import{I as Y,a as Z,b as ee,c as se}from"./IconSearch-UZAvzzne.js";import{G as S}from"./Grid-C0iy7L3J.js";import{I as te}from"./IconTrash-DhPbUAN9.js";import{I as oe}from"./IconUsers-CXeSloe5.js";const xe=o=>{const[m,b]=c.useState(""),[I,{open:v,close:l}]=H(!1),[r,P]=c.useState(null),[i,D]=c.useState(o.users.current_page),{data:g,last_page:T,total:j,per_page:p}=o.users,k=s=>{const t=s.trim().split(" ");return t.length===1?t[0][0].toUpperCase():`${t[0][0]}${t.at(-1)[0]}`.toUpperCase()},A=s=>{a.get(route("users.edit",s.id))},U=()=>{r&&a.delete(route("users.destroy",r.id),{onSuccess:l})},M=s=>{P(s),v()},_=[{label:"Edit",action:A,leftSection:e.jsx(ee,{}),color:"yellow"},{label:"Delete",action:M,leftSection:e.jsx(te,{}),color:"red"}],f=g.filter(s=>{const t=m.toLowerCase();return s.full_name.toLowerCase().includes(t)||s.role.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)}),z=s=>{D(s),a.get(route("users.index"),{page:s})},B=`Showing ${p*(i-1)+1} â€“ ${Math.min(j,p*i)} of ${j}`,E=()=>e.jsxs(C,{align:"center",py:32,spacing:"xs",children:[e.jsx(oe,{size:48,color:"gray"}),e.jsx(h,{order:3,c:"gray",children:"No users available yet."})]}),G=()=>e.jsxs(C,{align:"center",py:32,spacing:"xs",children:[e.jsx(se,{size:48,color:"gray"}),e.jsx(h,{order:3,c:"gray",children:"User Not Found"})]});return e.jsxs(J,{title:o.title,user:o.auth.user,notification:o.notification,children:[e.jsxs($,{opened:I,onClose:l,title:"Confirm Deletion",centered:!0,children:[e.jsxs(u,{children:["Are you sure you want to delete"," ",e.jsx("strong",{children:r==null?void 0:r.full_name}),"? This action cannot be undone."]}),e.jsxs(W,{cols:2,mt:"md",children:[e.jsx(d,{variant:"default",onClick:l,children:"Cancel"}),e.jsx(d,{color:"red",onClick:U,children:"Delete"})]})]}),e.jsxs(O,{flex:1,size:"xl",w:"100%",my:32,children:[e.jsxs(R,{justify:"space-between",align:"start",gap:16,children:[e.jsx(V,{title:"Users",description:"View, manage, and assign roles to user accounts within the system."}),e.jsx(X,{label:"Craete User",children:e.jsx(y,{display:{base:"block",xs:"none"},onClick:()=>a.get(route("users.create")),children:e.jsx(w,{})})}),e.jsx(d,{leftSection:e.jsx(w,{}),display:{base:"none",xs:"block"},onClick:()=>a.get(route("users.create")),children:"Create User"})]}),e.jsxs(x,{withBorder:!0,shadow:"xs",children:[e.jsx(x.Section,{withBorder:!0,p:16,children:e.jsx(F,{leftSection:e.jsx(Y,{}),placeholder:"Search by name, email, or role...",value:m,onChange:s=>b(s.target.value)})}),g.length===0?E():f.length===0?G():e.jsx(S,{pt:16,gutter:"lg",children:f.map(s=>e.jsx(S.Col,{span:{base:12,sm:6,md:4,lg:3},children:e.jsxs(x,{shadow:"xs",radius:"md",withBorder:!0,children:[e.jsxs(n,{shadow:"xl",position:"bottom-end",withArrow:!0,arrowPosition:"center",children:[e.jsx(n.Target,{children:e.jsx(y,{pos:"absolute",variant:"subtle",color:"ghost",right:16,children:e.jsx(Z,{})})}),e.jsx(n.Dropdown,{p:0,children:_.map((t,L)=>e.jsx(n.Item,{leftSection:t.leftSection,onClick:()=>t.action(s),color:t.color||void 0,h:48,children:t.label},L))})]}),e.jsx(Q,{mx:"auto",size:64,color:s.role==="Project Manager"?"magic":s.role==="Developer"?"peach":s.role==="Quality Assurance"?"soap":"default",children:k(s.full_name)}),e.jsx(h,{order:3,align:"center",mt:16,lineClamp:1,children:s.full_name}),e.jsx(u,{align:"center",c:"ghost",size:"sm",mb:16,children:s.email}),e.jsx(K,{mx:"auto",color:s.role==="Project Manager"?"magic":s.role==="Developer"?"peach":s.role==="Quality Assurance"?"soap":"default",variant:"light",children:s.role})]})},s.id))}),e.jsxs(N,{justify:"space-between",align:"center",mt:16,children:[e.jsx(u,{size:"sm",children:B}),e.jsx(q,{value:i,onChange:z,total:T,radius:"xs"})]})]})]})]})};export{xe as default};
