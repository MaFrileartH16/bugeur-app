import{b,j as e,G as C,L as P,d as c}from"./app-D1ROa2dk.js";import{P as w,G as s}from"./PageHeadings-CXlcB1tZ.js";import{I as E,P as y,a as _}from"./IconPassword-DnG6uL1U.js";import{T as i}from"./TextInput-DoMuMr3T.js";import{A as v,T as l,a as I,b as S}from"./AppLayout-6WbUBhn6.js";import{F as G}from"./FileButton-fRe6bWuF.js";import{I as F}from"./IconUpload-C8NJVJfc.js";import{I as O}from"./IconKey-C8cnS4ze.js";import{I as T}from"./IconCornerDownLeft-WUnmPxyi.js";const J=d=>{const{user:t}=d.auth,r=b({_method:"put",profile_photo:t.profile_photo_path||"",full_name:t.full_name||"",email:t.email||"",password:""}),p=a=>a&&!["image/png","image/jpeg","image/jpg"].includes(a.type)?"Only PNG, JPEG, and JPG formats are allowed.":a&&a.size>2*1024*1024?"File size must not exceed 2 MB.":null,h=a=>{const o=p(a);if(o){r.setError("profile_photo",o);return}r.setData("profile_photo",a),r.clearErrors("profile_photo")},u=a=>a?a.endsWith("@bugeur.id")?null:"Email must end with @bugeur.id.":"Email is required.",m=a=>a&&a.length<8?"Password must be at least 8 characters.":null,j=a=>{const o=a.target.value;r.setData("email",o);const n=u(o);n?r.setError("email",n):r.clearErrors("email")},x=a=>{const o=a.target.value;r.setData("password",o);const n=m(o);n?r.setError("password",n):r.clearErrors("password")},f=a=>{a.preventDefault(),r.post(route("profile.update",t),{onFinish:()=>r.reset("password")})},g=Object.keys(r.errors).length>0;return e.jsx("form",{onSubmit:f,children:e.jsxs(v,{title:"Edit Profile",user:t,notification:d.notification,children:[e.jsx(w,{title:"Edit Profile",description:"Update your profile details."}),e.jsxs(s,{gutter:32,justify:"flex-end",children:[e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Profile Photo"})}),e.jsxs(s.Col,{span:{base:12,sm:8},children:[e.jsxs(C,{align:"flex-start",spacing:"sm",children:[e.jsx(P,{src:r.data.profile_photo instanceof File?URL.createObjectURL(r.data.profile_photo):r.data.profile_photo,alt:"Profile Photo",size:80}),e.jsx(G,{onChange:h,accept:"image/png,image/jpeg,image/jpg",children:a=>e.jsxs(c,{variant:"subtle",...a,leftSection:e.jsx(F,{}),children:[r.data.profile_photo?"Change":"Upload"," Profile Photo"]})})]}),r.errors.profile_photo&&e.jsx(I,{c:"red",size:"sm",children:r.errors.profile_photo})]})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Full Name"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(i,{value:r.data.full_name,placeholder:"Enter your full name",description:"Your name cannot be changed. Contact support if you need to update it.",leftSection:e.jsx(S,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Role"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(i,{value:t.role,placeholder:"Your role",description:"This is your system role and cannot be changed.",leftSection:e.jsx(O,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Email"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(i,{value:r.data.email,onChange:j,error:r.errors.email,placeholder:"example@bugeur.id",description:"Your email address is tied to your account and cannot be changed.",leftSection:e.jsx(E,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{align:"start",gutter:0,children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"New Password"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(y,{value:r.data.password,onChange:x,error:r.errors.password,placeholder:"Enter a new password",description:"Password must be at least 8 characters long.",leftSection:e.jsx(_,{})})})]})}),e.jsx(s.Col,{span:{base:12,sm:8},align:"end",children:e.jsx(c,{type:"submit",leftSection:e.jsx(T,{}),disabled:r.processing||g,loading:r.processing,children:"Save Changes"})})]})]})})};export{J as default};
