import{r as d,j as e,M as Q,c as h,G as y,D as C,h as n,T as N,L as F,K as q}from"./app-l3PHe4uA.js";import{u as K,A as O,C as R,T as a,M as l,S}from"./AppLayout-C8W-FPwP.js";import{T as u,S as V,a as H,I as b,C as x,b as J,c as W,B as X,d as Y,e as Z}from"./IconSearch-CDZAVfi_.js";import{G as w}from"./Grid-ytByML-q.js";import{I as ee}from"./IconTrash-Bj_WYK42.js";import{I as se}from"./IconUsers-CKgdAAUf.js";const ie=o=>{const[m,I]=d.useState(""),[v,{open:D,close:i}]=K(!1),[r,A]=d.useState(null),[c,T]=d.useState(o.users.current_page),{data:j,last_page:P,total:g,per_page:p}=o.users,k=s=>{const t=s.trim().split(" ");return t.length===1?t[0][0].toUpperCase():`${t[0][0]}${t.at(-1)[0]}`.toUpperCase()},M=s=>{n.get(route("users.edit",s.id))},U=()=>{r&&n.delete(route("users.destroy",r.id),{onSuccess:i})},_=s=>{A(s),D()},z=[{label:"Edit",action:M,leftSection:e.jsx(Y,{}),color:"yellow"},{label:"Delete",action:_,leftSection:e.jsx(ee,{}),color:"red"}],f=j.filter(s=>{const t=m.toLowerCase();return s.full_name.toLowerCase().includes(t)||s.role.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)}),B=s=>{T(s),n.get(route("users.index"),{page:s})},L=`Showing ${p*(c-1)+1} â€“ ${Math.min(g,p*c)} of ${g}`,E=()=>e.jsxs(S,{align:"center",py:32,spacing:"xs",children:[e.jsx(se,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"No users available yet."})]}),G=()=>e.jsxs(S,{align:"center",py:32,spacing:"xs",children:[e.jsx(Z,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"User Not Found"})]});return e.jsxs(O,{title:o.title,user:o.auth.user,notification:o.notification,children:[e.jsxs(Q,{opened:v,onClose:i,title:"Confirm Deletion",centered:!0,children:[e.jsxs(u,{children:["Are you sure you want to delete"," ",e.jsx("strong",{children:r==null?void 0:r.full_name}),"? This action cannot be undone."]}),e.jsxs(V,{cols:2,mt:"md",children:[e.jsx(h,{variant:"default",onClick:i,children:"Cancel"}),e.jsx(h,{color:"red",onClick:U,children:"Delete"})]})]}),e.jsxs(R,{flex:1,size:"xl",w:"100%",my:32,children:[e.jsxs(y,{mb:32,justify:"space-between",children:[e.jsx(a,{children:o.title}),e.jsx(H,{label:"Add User",children:e.jsx(C,{display:{base:"block",xs:"none"},onClick:()=>n.get(route("users.create")),children:e.jsx(b,{})})}),e.jsx(h,{leftSection:e.jsx(b,{}),display:{base:"none",xs:"block"},onClick:()=>n.get(route("users.create")),children:"Add User"})]}),e.jsxs(x,{withBorder:!0,children:[e.jsx(x.Section,{withBorder:!0,p:16,children:e.jsx(N,{leftSection:e.jsx(J,{}),placeholder:"Search by name, email, or role...",value:m,onChange:s=>I(s.target.value)})}),j.length===0?E():f.length===0?G():e.jsx(w,{pt:16,gutter:"lg",children:f.map(s=>e.jsx(w.Col,{span:{base:12,sm:6,md:4,lg:3},children:e.jsxs(x,{shadow:"sm",radius:"md",withBorder:!0,children:[e.jsxs(l,{shadow:"xl",position:"bottom-end",withArrow:!0,arrowPosition:"center",children:[e.jsx(l.Target,{children:e.jsx(C,{pos:"absolute",variant:"subtle",color:"ghost",right:16,children:e.jsx(W,{})})}),e.jsx(l.Dropdown,{p:0,children:z.map((t,$)=>e.jsx(l.Item,{leftSection:t.leftSection,onClick:()=>t.action(s),color:t.color||void 0,h:48,children:t.label},$))})]}),e.jsx(F,{mx:"auto",size:96,color:s.role==="Project Manager"?"magic":s.role==="Developer"?"peach":s.role==="Quality Assurance"?"soap":"default",children:k(s.full_name)}),e.jsx(a,{order:3,align:"center",mt:16,lineClamp:1,children:s.full_name}),e.jsx(u,{align:"center",color:"dimmed",size:"sm",mb:16,children:s.email}),e.jsx(X,{mx:"auto",color:s.role==="Project Manager"?"magic":s.role==="Developer"?"peach":s.role==="Quality Assurance"?"soap":"default",variant:"light",children:s.role})]})},s.id))}),e.jsxs(y,{justify:"space-between",align:"center",mt:16,children:[e.jsx(u,{size:"sm",children:L}),e.jsx(q,{value:c,onChange:B,total:P,radius:"xs"})]})]})]})]})};export{ie as default};
