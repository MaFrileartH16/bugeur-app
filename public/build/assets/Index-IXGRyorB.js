import{r as p,j as e,M as U,b as j,J as I,o,p as O,B as R,X as l,G as V,$ as q}from"./app-CEaRo_v6.js";import{P as H}from"./PageHeadings-BylyljLb.js";import{c as u,u as J,A as X,a as c,F as m,f as d,T as a,M as i,S as h}from"./AppLayout-z9avZPDp.js";import{S as P}from"./SimpleGrid-BPFM7Wc3.js";import{C as K}from"./Container-DRUqgMco.js";import{I as M,C as f}from"./IconPlus-DzK2Zbhd.js";import{I as W}from"./IconSearch-YbNJdRzM.js";import{G as b}from"./Grid-B0LHfwIk.js";import{I as Y}from"./IconTrash-ccN_zdzo.js";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=u("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee=u("outline","folders","IconFolders",[["path",{d:"M9 3h3l2 2h5a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M17 16v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var te=u("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var se=u("outline","search-off","IconSearchOff",[["path",{d:"M5.039 5.062a7 7 0 0 0 9.91 9.89m1.584 -2.434a7 7 0 0 0 -9.038 -9.057",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);const ue=r=>{const[y,_]=p.useState(""),[D,{open:z,close:x}]=J(!1),[n,A]=p.useState(null),[g,$]=p.useState(r.projects.current_page),{data:v,last_page:T,total:w,per_page:C}=r.projects,B=t=>{o.get(route("projects.edit",t.id))},F=()=>{n&&o.delete(route("projects.destroy",n.id),{onSuccess:x})},G=t=>{A(t),z()},k=v.filter(t=>{const s=y.toLowerCase();return t.title.toLowerCase().includes(s)}),E=t=>{$(t),o.get(route("projects.index"),{page:t})},L=()=>e.jsxs(h,{align:"center",py:32,spacing:"xs",children:[e.jsx(ee,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"No projects available yet."})]}),N=()=>e.jsxs(h,{align:"center",py:32,spacing:"xs",children:[e.jsx(se,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"Project Not Found"})]}),Q=`Showing ${C*(g-1)+1} – ${Math.min(w,C*g)} of ${w}`,S=t=>{const s=t.trim().split(" ");return s.length===1?s[0][0].toUpperCase():`${s[0][0]}${s.at(-1)[0]}`.toUpperCase()};return e.jsxs(X,{title:"Projects",user:r.auth.user,notification:r.notification,children:[e.jsxs(U,{opened:D,onClose:x,title:"Confirm Deletion",centered:!0,children:[e.jsxs(c,{children:["Are you sure you want to delete"," ",e.jsx("strong",{children:n==null?void 0:n.title}),"? This action cannot be undone."]}),e.jsxs(P,{cols:2,mt:"md",children:[e.jsx(j,{variant:"default",onClick:x,children:"Cancel"}),e.jsx(j,{color:"red",onClick:F,children:"Delete"})]})]}),e.jsxs(K,{flex:1,size:"xl",w:"100%",my:32,children:[e.jsxs(m,{justify:"space-between",align:"start",gap:16,children:[e.jsx(H,{title:"Projects",description:"Browse, manage, and track the progress of all projects within the system."}),r.auth.user.role==="Admin"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{label:"Create Project",children:e.jsx(I,{display:{base:"block",xs:"none"},onClick:()=>o.get(route("projects.create")),children:e.jsx(M,{})})}),e.jsx(j,{leftSection:e.jsx(M,{}),display:{base:"none",xs:"block"},onClick:()=>o.get(route("projects.create")),children:"Create Project"})]})]}),e.jsxs(f,{withBorder:!0,shadow:"xs",children:[e.jsx(f.Section,{withBorder:!0,p:16,children:e.jsx(O,{leftSection:e.jsx(W,{}),placeholder:"Search by project title...",value:y,onChange:t=>_(t.target.value)})}),v.length===0?L():k.length===0?N():e.jsx(b,{pt:16,gutter:"lg",children:k.map(t=>e.jsx(b.Col,{span:{base:12,sm:6},children:e.jsxs(f,{shadow:"xs",withBorder:!0,sx:{position:"relative"},style:{cursor:"pointer"},onClick:()=>o.get(route("projects.show",t.id)),children:[e.jsxs(m,{align:"center",children:[e.jsxs(R,{children:[e.jsx(a,{order:3,lineClamp:1,children:t.title}),e.jsxs(c,{c:"ghost",size:"sm",children:["Created on"," ",new Date(t.created_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})," ","• Total Bugs: ",t.bugs.length]})]}),r.auth.user.role==="Admin"&&e.jsxs(i,{shadow:"xl",position:"bottom-end",withArrow:!0,arrowPosition:"center",children:[e.jsx(i.Target,{children:e.jsx(I,{ml:"auto",variant:"subtle",color:"ghost",onClick:s=>s.stopPropagation(),sx:{position:"absolute",top:8,right:8,zIndex:2},children:e.jsx(Z,{})})}),e.jsxs(i.Dropdown,{p:0,children:[e.jsx(i.Item,{leftSection:e.jsx(te,{}),onClick:s=>{s.stopPropagation(),B(t)},color:"yellow",h:48,children:"Edit"}),e.jsx(i.Item,{leftSection:e.jsx(Y,{}),onClick:s=>{s.stopPropagation(),G(t)},color:"red",h:48,children:"Delete"})]})]})]}),e.jsx(c,{color:"dimmed",size:"sm",my:16,lineClamp:2,children:t.description||"No description available"}),e.jsxs(P,{cols:2,children:[e.jsxs(h,{gap:8,children:[e.jsx(a,{order:5,children:"Manager"}),e.jsx(d,{label:t.manager.full_name,withArrow:!0,children:e.jsx(l,{color:"magic",size:48,children:S(t.manager.full_name)})})]}),e.jsx(m,{justify:"flex-end",children:e.jsxs(h,{gap:16,children:[e.jsx(a,{order:5,align:"end",children:"Members"}),e.jsxs(l.Group,{children:[t.working_on.slice(0,3).map(s=>e.jsx(d,{label:`${s.full_name} (${s.role})`,children:e.jsx(l,{color:s.role==="Project Manager"?"magic":s.role==="Developer"?"peach":s.role==="Quality Assurance"?"soap":"default",size:48,children:S(s.full_name)})},s.id)),t.working_on.length>3&&e.jsx(d,{label:t.working_on.slice(3).map(s=>`${s.full_name} (${s.role})`).join(", "),multiline:!0,width:200,children:e.jsxs(l,{color:"ghost",size:48,children:["+",t.working_on.length-3]})})]})]})})]})]})},t.id))}),e.jsxs(V,{justify:"space-between",align:"center",mt:16,children:[e.jsx(c,{size:"sm",children:Q}),e.jsx(q,{value:g,onChange:E,total:T,radius:"xs"})]})]})]})]})};export{ue as default};
