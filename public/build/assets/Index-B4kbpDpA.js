import{r as u,j as e,M as R,c as j,G as P,D as k,h as o,T as q,B as g,K as l,L as H}from"./app-RcAloIyv.js";import{T as c,P as K}from"./PageHeadings-CIjb8soY.js";import{c as O,u as V,A as J,C as W,d,F as v,T as a,M as i,S as I}from"./AppLayout-Br51ywqD.js";import{S as b,C as p}from"./SimpleGrid-DEouYQHa.js";import{I as _,a as X,b as Y,c as Z,d as ee}from"./IconSearch-DMq2wQRd.js";import{G as D}from"./Grid-D53SFOGt.js";import{I as se}from"./IconTrash-D9RresD7.js";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var te=O("outline","folders","IconFolders",[["path",{d:"M9 3h3l2 2h5a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M17 16v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);const de=r=>{const[m,T]=u.useState(""),[z,{open:A,close:h}]=V(!1),[n,M]=u.useState(null),[x,$]=u.useState(r.projects.current_page),{data:f,last_page:B,total:y,per_page:w}=r.projects,F=s=>{o.get(route("projects.edit",s.id))},G=()=>{n&&o.delete(route("projects.destroy",n.id),{onSuccess:h})},E=s=>{M(s),A()},C=f.filter(s=>{const t=m.toLowerCase();return s.title.toLowerCase().includes(t)}),L=s=>{$(s),o.get(route("projects.index"),{page:s})},N=()=>e.jsxs(I,{align:"center",py:32,spacing:"xs",children:[e.jsx(te,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"No projects available yet."})]}),Q=()=>e.jsxs(I,{align:"center",py:32,spacing:"xs",children:[e.jsx(ee,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"Project Not Found"})]}),U=`Showing ${w*(x-1)+1} – ${Math.min(y,w*x)} of ${y}`,S=s=>{const t=s.trim().split(" ");return t.length===1?t[0][0].toUpperCase():`${t[0][0]}${t.at(-1)[0]}`.toUpperCase()};return e.jsxs(J,{title:"Projects",user:r.auth.user,notification:r.notification,children:[e.jsxs(R,{opened:z,onClose:h,title:"Confirm Deletion",centered:!0,children:[e.jsxs(c,{children:["Are you sure you want to delete"," ",e.jsx("strong",{children:n==null?void 0:n.title}),"? This action cannot be undone."]}),e.jsxs(b,{cols:2,mt:"md",children:[e.jsx(j,{variant:"default",onClick:h,children:"Cancel"}),e.jsx(j,{color:"red",onClick:G,children:"Delete"})]})]}),e.jsxs(W,{flex:1,size:"xl",w:"100%",my:32,children:[e.jsxs(P,{justify:"space-between",align:"start",children:[e.jsx(K,{title:"Projects",description:"Browse, manage, and track the progress of all projects within the system."}),r.auth.user.role==="Admin"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{label:"Create Project",children:e.jsx(k,{display:{base:"block",xs:"none"},onClick:()=>o.get(route("projects.create")),children:e.jsx(_,{})})}),e.jsx(j,{leftSection:e.jsx(_,{}),display:{base:"none",xs:"block"},onClick:()=>o.get(route("projects.create")),children:"Create Project"})]})]}),e.jsxs(p,{withBorder:!0,shadow:"xs",children:[e.jsx(p.Section,{withBorder:!0,p:16,children:e.jsx(q,{leftSection:e.jsx(X,{}),placeholder:"Search by project title...",value:m,onChange:s=>T(s.target.value)})}),f.length===0?N():C.length===0?Q():e.jsx(D,{pt:16,gutter:"lg",children:C.map(s=>e.jsx(D.Col,{span:{base:12,sm:6},children:e.jsxs(p,{shadow:"xs",withBorder:!0,sx:{position:"relative"},style:{cursor:"pointer"},onClick:()=>o.get(route("projects.show",s.id)),children:[e.jsxs(v,{align:"center",children:[e.jsxs(g,{children:[e.jsx(a,{order:3,lineClamp:1,children:s.title}),e.jsxs(c,{c:"ghost",size:"sm",children:["Created on"," ",new Date(s.created_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})," ","• Total Bugs: 234"]})]}),r.auth.user.role==="Admin"&&e.jsxs(i,{shadow:"xl",position:"bottom-end",withArrow:!0,arrowPosition:"center",children:[e.jsx(i.Target,{children:e.jsx(k,{ml:"auto",variant:"subtle",color:"ghost",onClick:t=>t.stopPropagation(),sx:{position:"absolute",top:8,right:8,zIndex:2},children:e.jsx(Y,{})})}),e.jsxs(i.Dropdown,{p:0,children:[e.jsx(i.Item,{leftSection:e.jsx(Z,{}),onClick:t=>{t.stopPropagation(),F(s)},color:"yellow",h:48,children:"Edit"}),e.jsx(i.Item,{leftSection:e.jsx(se,{}),onClick:t=>{t.stopPropagation(),E(s)},color:"red",h:48,children:"Delete"})]})]})]}),e.jsx(c,{color:"dimmed",size:"sm",my:16,lineClamp:2,children:s.description||"No description available"}),e.jsxs(b,{cols:2,children:[e.jsxs(g,{children:[e.jsx(a,{order:5,children:"Manager"}),e.jsx(d,{label:s.manager.full_name,withArrow:!0,children:e.jsx(l,{color:"magic",size:48,children:S(s.manager.full_name)})})]}),e.jsx(v,{justify:"flex-end",children:e.jsxs(g,{children:[e.jsx(a,{order:5,align:"end",children:"Members"}),e.jsxs(l.Group,{children:[s.working_on.slice(0,3).map(t=>e.jsx(d,{label:`${t.full_name} (${t.role})`,children:e.jsx(l,{color:t.role==="Project Manager"?"magic":t.role==="Developer"?"peach":t.role==="Quality Assurance"?"soap":"default",size:48,children:S(t.full_name)})},t.id)),s.working_on.length>3&&e.jsx(d,{label:s.working_on.slice(3).map(t=>`${t.full_name} (${t.role})`).join(", "),multiline:!0,width:200,children:e.jsxs(l,{color:"ghost",size:48,children:["+",s.working_on.length-3]})})]})]})})]})]})},s.id))}),e.jsxs(P,{justify:"space-between",align:"center",mt:16,children:[e.jsx(c,{size:"sm",children:U}),e.jsx(H,{value:x,onChange:L,total:B,radius:"xs"})]})]})]})]})};export{de as default};
