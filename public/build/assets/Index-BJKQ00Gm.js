import{r as g,j as e,M as Q,c as j,K as k,q as o,T as U,B as q,X as l,G as R,$ as H}from"./app-uL56QGf8.js";import{P as K}from"./PageHeadings-uEE45tAn.js";import{c as O,u as V,A as X,C as J,F as p,e as c,T as a,M as i,S as d}from"./AppLayout-DsLAsZh1.js";import{T as h}from"./Text-C5tJwUvw.js";import{S as v,I}from"./IconPlus-rI_BKYI-.js";import{C as m}from"./Card-DGzw9oJ5.js";import{I as W,a as Y,b as Z,c as ee}from"./IconSearch-B7jH9ZRU.js";import{G as b}from"./Grid-DmBclv0S.js";import{I as se}from"./IconTrash-R-D4yrDy.js";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var te=O("outline","folders","IconFolders",[["path",{d:"M9 3h3l2 2h5a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M17 16v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);const ue=r=>{const[f,_]=g.useState(""),[T,{open:z,close:u}]=V(!1),[n,A]=g.useState(null),[x,D]=g.useState(r.projects.current_page),{data:y,last_page:M,total:w,per_page:C}=r.projects,$=s=>{o.get(route("projects.edit",s.id))},B=()=>{n&&o.delete(route("projects.destroy",n.id),{onSuccess:u})},F=s=>{A(s),z()},S=y.filter(s=>{const t=f.toLowerCase();return s.title.toLowerCase().includes(t)}),G=s=>{D(s),o.get(route("projects.index"),{page:s})},E=()=>e.jsxs(d,{align:"center",py:32,spacing:"xs",children:[e.jsx(te,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"No projects available yet."})]}),L=()=>e.jsxs(d,{align:"center",py:32,spacing:"xs",children:[e.jsx(ee,{size:48,color:"gray"}),e.jsx(a,{order:3,c:"gray",children:"Project Not Found"})]}),N=`Showing ${C*(x-1)+1} – ${Math.min(w,C*x)} of ${w}`,P=s=>{const t=s.trim().split(" ");return t.length===1?t[0][0].toUpperCase():`${t[0][0]}${t.at(-1)[0]}`.toUpperCase()};return e.jsxs(X,{title:"Projects",user:r.auth.user,notification:r.notification,children:[e.jsxs(Q,{opened:T,onClose:u,title:"Confirm Deletion",centered:!0,children:[e.jsxs(h,{children:["Are you sure you want to delete"," ",e.jsx("strong",{children:n==null?void 0:n.title}),"? This action cannot be undone."]}),e.jsxs(v,{cols:2,mt:"md",children:[e.jsx(j,{variant:"default",onClick:u,children:"Cancel"}),e.jsx(j,{color:"red",onClick:B,children:"Delete"})]})]}),e.jsxs(J,{flex:1,size:"xl",w:"100%",my:32,children:[e.jsxs(p,{justify:"space-between",align:"start",gap:16,children:[e.jsx(K,{title:"Projects",description:"Browse, manage, and track the progress of all projects within the system."}),r.auth.user.role==="Admin"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"Create Project",children:e.jsx(k,{display:{base:"block",xs:"none"},onClick:()=>o.get(route("projects.create")),children:e.jsx(I,{})})}),e.jsx(j,{leftSection:e.jsx(I,{}),display:{base:"none",xs:"block"},onClick:()=>o.get(route("projects.create")),children:"Create Project"})]})]}),e.jsxs(m,{withBorder:!0,shadow:"xs",children:[e.jsx(m.Section,{withBorder:!0,p:16,children:e.jsx(U,{leftSection:e.jsx(W,{}),placeholder:"Search by project title...",value:f,onChange:s=>_(s.target.value)})}),y.length===0?E():S.length===0?L():e.jsx(b,{pt:16,gutter:"lg",children:S.map(s=>e.jsx(b.Col,{span:{base:12,sm:6},children:e.jsxs(m,{shadow:"xs",withBorder:!0,sx:{position:"relative"},style:{cursor:"pointer"},onClick:()=>o.get(route("projects.show",s.id)),children:[e.jsxs(p,{align:"center",children:[e.jsxs(q,{children:[e.jsx(a,{order:3,lineClamp:1,children:s.title}),e.jsxs(h,{c:"ghost",size:"sm",children:["Created on"," ",new Date(s.created_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})," ","• Total Bugs: ",s.bugs.length]})]}),r.auth.user.role==="Admin"&&e.jsxs(i,{shadow:"xl",position:"bottom-end",withArrow:!0,arrowPosition:"center",children:[e.jsx(i.Target,{children:e.jsx(k,{ml:"auto",variant:"subtle",color:"ghost",onClick:t=>t.stopPropagation(),sx:{position:"absolute",top:8,right:8,zIndex:2},children:e.jsx(Y,{})})}),e.jsxs(i.Dropdown,{p:0,children:[e.jsx(i.Item,{leftSection:e.jsx(Z,{}),onClick:t=>{t.stopPropagation(),$(s)},color:"yellow",h:48,children:"Edit"}),e.jsx(i.Item,{leftSection:e.jsx(se,{}),onClick:t=>{t.stopPropagation(),F(s)},color:"red",h:48,children:"Delete"})]})]})]}),e.jsx(h,{color:"dimmed",size:"sm",my:16,lineClamp:2,children:s.description||"No description available"}),e.jsxs(v,{cols:2,children:[e.jsxs(d,{gap:8,children:[e.jsx(a,{order:5,children:"Manager"}),e.jsx(c,{label:s.manager.full_name,withArrow:!0,children:e.jsx(l,{color:"magic",size:48,children:P(s.manager.full_name)})})]}),e.jsx(p,{justify:"flex-end",children:e.jsxs(d,{gap:16,children:[e.jsx(a,{order:5,align:"end",children:"Members"}),e.jsxs(l.Group,{children:[s.working_on.slice(0,3).map(t=>e.jsx(c,{label:`${t.full_name} (${t.role})`,children:e.jsx(l,{color:t.role==="Project Manager"?"magic":t.role==="Developer"?"peach":t.role==="Quality Assurance"?"soap":"default",size:48,children:P(t.full_name)})},t.id)),s.working_on.length>3&&e.jsx(c,{label:s.working_on.slice(3).map(t=>`${t.full_name} (${t.role})`).join(", "),multiline:!0,width:200,children:e.jsxs(l,{color:"ghost",size:48,children:["+",s.working_on.length-3]})})]})]})})]})]})},s.id))}),e.jsxs(R,{justify:"space-between",align:"center",mt:16,children:[e.jsx(h,{size:"sm",children:N}),e.jsx(H,{value:x,onChange:G,total:M,radius:"xs"})]})]})]})]})};export{ue as default};
