import{b as g,j as r,T as c,S as C,c as _}from"./app-l3PHe4uA.js";import{b as v,A as E,C as y,T as d}from"./AppLayout-C8W-FPwP.js";import{I as S}from"./IconMail-DeRBIQvH.js";import{I as w}from"./IconKey-DuKxvrae.js";import{G as o}from"./Grid-ytByML-q.js";const T=n=>{const{user:p}=n.auth,i=n.user,e=g({full_name:i.full_name||"",email:i.email||"",role:i.role||"",password:""}),h=(a,l)=>l?a==="email"&&!l.endsWith("@bugeur.id")?"Email must use @bugeur.id.":null:`${a.replace("_"," ").replace(/^\w/,t=>t.toUpperCase())} is required.`,u=a=>l=>{let s=l.target?l.target.value:l;a==="full_name"?s=s.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()).join(" "):a==="email"&&(s=s.replace(/\s+/g,"").toLowerCase()),e.setData(a,s);const t=h(a,s);t?e.setError(a,t):e.clearErrors(a)},f=a=>{a.preventDefault(),e.put(route("users.update",i.id),{onFinish:()=>e.reset("password")})},j=!e.data.full_name||!e.data.email||!e.data.role,x=[{label:"Full Name",value:e.data.full_name,onChange:u("full_name"),error:e.errors.full_name,placeholder:"Enter the user's full name",leftSection:r.jsx(v,{}),component:c},{label:"Email Address",value:e.data.email,onChange:u("email"),error:e.errors.email,placeholder:"Enter the user's email address (e.g., username@bugeur.id)",leftSection:r.jsx(S,{}),component:c},{label:"Role",defaultValue:e.data.role.toLowerCase().replace(/ /g,"_"),onChange:u("role"),error:e.errors.role,placeholder:"Choose the user's role",leftSection:r.jsx(w,{}),component:C,data:[{value:"project_manager",label:"Project Manager"},{value:"developer",label:"Developer"},{value:"quality_assurance",label:"Quality Assurance"}]}],b=Object.keys(e.errors).length>0;return r.jsx("form",{onSubmit:f,children:r.jsx(E,{title:n.title,user:p,children:r.jsxs(y,{flex:1,size:"xl",w:"100%",py:32,children:[r.jsx(d,{mb:32,children:n.title}),r.jsxs(o,{gutter:16,justify:"flex-end",children:[x.map(({component:a,label:l,...s},t)=>r.jsx(o.Col,{span:{base:12},children:r.jsxs(o,{gutter:{base:8,sm:0},align:"center",children:[r.jsx(o.Col,{span:{base:12,sm:4},children:r.jsx(d,{order:5,children:l})}),r.jsx(o.Col,{span:{base:12,sm:8},children:r.jsx(a,{...s})})]})},t)),r.jsx(o.Col,{span:{base:12,sm:8,smOffset:4},children:r.jsx(_,{type:"submit",fullWidth:!0,disabled:e.processing||b||j,loading:e.processing,children:"Update User"})})]})]})})})};export{T as default};
