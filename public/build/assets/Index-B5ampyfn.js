import{F as ye,a0 as ce,o as p,a1 as z,j as e,a2 as de,a3 as J,f as me,u as pe,a as Se,a4 as ve,B as g,r as m,M as W,d as T,A as $,T as Y,S as h,h as b,G as Z,a5 as ee,x as _e,L as A}from"./app-D1ROa2dk.js";import{g as I,a as be,P as Ce,G as F}from"./PageHeadings-CXlcB1tZ.js";import{c as ue,u as we,A as Ie,a as d,f as ke,g as B,S as C,F as q,h as E,T as L,M as w,d as Pe}from"./AppLayout-6WbUBhn6.js";import{I as Ae,a as te,b as se,c as ae,d as le,e as ne,f as re,g as oe,C as Fe,h as Be,i as De,j as Ne}from"./IconSortDescendingLetters-DmOYoflD.js";import{I as ie}from"./IconPlus-BLphxDSX.js";import{I as ze}from"./IconEdit-CVyE-kLw.js";function Me({spacing:s,verticalSpacing:i,cols:r,selector:u}){var a;const c=ye(),x=i===void 0?s:i,S=ce({"--sg-spacing-x":p(I(s)),"--sg-spacing-y":p(I(x)),"--sg-cols":(a=I(r))==null?void 0:a.toString()}),j=z(c.breakpoints).reduce((l,o)=>(l[o]||(l[o]={}),typeof s=="object"&&s[o]!==void 0&&(l[o]["--sg-spacing-x"]=p(s[o])),typeof x=="object"&&x[o]!==void 0&&(l[o]["--sg-spacing-y"]=p(x[o])),typeof r=="object"&&r[o]!==void 0&&(l[o]["--sg-cols"]=r[o]),l),{}),y=be(z(j),c.breakpoints).filter(l=>z(j[l.value]).length>0).map(l=>({query:`(min-width: ${c.breakpoints[l.value]})`,styles:j[l.value]}));return e.jsx(de,{styles:S,media:y,selector:u})}function Q(s){return typeof s=="object"&&s!==null?z(s):[]}function Ge(s){return s.sort((i,r)=>J(i)-J(r))}function Te({spacing:s,verticalSpacing:i,cols:r}){const u=Array.from(new Set([...Q(s),...Q(i),...Q(r)]));return Ge(u)}function $e({spacing:s,verticalSpacing:i,cols:r,selector:u}){var y;const c=i===void 0?s:i,x=ce({"--sg-spacing-x":p(I(s)),"--sg-spacing-y":p(I(c)),"--sg-cols":(y=I(r))==null?void 0:y.toString()}),S=Te({spacing:s,verticalSpacing:i,cols:r}),j=S.reduce((a,l)=>(a[l]||(a[l]={}),typeof s=="object"&&s[l]!==void 0&&(a[l]["--sg-spacing-x"]=p(s[l])),typeof c=="object"&&c[l]!==void 0&&(a[l]["--sg-spacing-y"]=p(c[l])),typeof r=="object"&&r[l]!==void 0&&(a[l]["--sg-cols"]=r[l]),a),{}),f=S.map(a=>({query:`simple-grid (min-width: ${a})`,styles:j[a]}));return e.jsx(de,{styles:x,container:f,selector:u})}var he={container:"m_925c2d2c",root:"m_2415a157"};const qe={cols:1,spacing:"md",type:"media"},M=me((s,i)=>{const r=pe("SimpleGrid",qe,s),{classNames:u,className:c,style:x,styles:S,unstyled:j,vars:f,cols:y,verticalSpacing:a,spacing:l,type:o,...k}=r,v=Se({name:"SimpleGrid",classes:he,props:r,className:c,style:x,classNames:u,styles:S,unstyled:j,vars:f}),_=ve();return o==="container"?e.jsxs(e.Fragment,{children:[e.jsx($e,{...r,selector:`.${_}`}),e.jsx("div",{...v("container"),children:e.jsx(g,{ref:i,...v("root",{className:_}),...k})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{...r,selector:`.${_}`}),e.jsx(g,{ref:i,...v("root",{className:_}),...k})]})});M.classes=he;M.displayName="@mantine/core/SimpleGrid";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee=ue("outline","folders","IconFolders",[["path",{d:"M9 3h3l2 2h5a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M17 16v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le=ue("outline","search-off","IconSearchOff",[["path",{d:"M5.039 5.062a7 7 0 0 0 9.91 9.89m1.584 -2.434a7 7 0 0 0 -9.038 -9.057",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);const We=s=>{const[i,{open:r,close:u}]=we(!1),[c,x]=m.useState(null),[S,j]=m.useState(s.projects.current_page),[f,y]=m.useState(s.search||""),[a,l]=m.useState({key:s.sort_key||"",direction:s.sort_direction||"asc"}),[o,k]=m.useState(s.filter_key||""),[v,_]=m.useState(s.filter_value||""),[G,V]=m.useState(String(s.per_page)||"10"),{data:R,last_page:Qe,total:Ve,per_page:Re}=s.projects;m.useEffect(()=>{y(s.search||""),l({key:s.sort_key||"",direction:s.sort_direction||"asc"}),k(s.filter_key||""),_(s.filter_value||""),V(String(s.per_page)||"10")},[s.search,s.sort_key,s.sort_direction,s.filter_key,s.filter_value,s.per_page]);const P=t=>{b.get(route("projects.index"),{page:1,search:f,sort_key:a.key,sort_direction:a.direction,filter_key:o,filter_value:v,per_page:Number(G),...t})},U=t=>{y(t),P({search:t})},D=(t,n)=>{l({key:t,direction:n}),P({sort_key:t,sort_direction:n})},N=(t,n)=>{k(t),_(n),P({filter_key:t,filter_value:n})},K=t=>{V(t),P({per_page:Number(t)})},O=t=>{j(t),P({page:t})},ge=t=>{b.get(route("projects.edit",{project:t.id}))},H=t=>{confirm("Are you sure you want to delete this project?")&&b.delete(route("projects.destroy",t.id))},xe=t=>{confirm("Are you sure you want to restore this project?")&&b.patch(route("projects.restore",t.id))},X=R.filter(t=>{const n=f.toLowerCase();return t.title.toLowerCase().includes(n)}),je=()=>e.jsxs(C,{align:"center",py:32,spacing:"xs",children:[e.jsx(Ee,{size:48,color:"gray"}),e.jsx(L,{order:3,c:"gray",children:"No projects available yet."})]}),fe=()=>e.jsxs(C,{align:"center",py:32,spacing:"xs",children:[e.jsx(Le,{size:48,color:"gray"}),e.jsx(L,{order:3,c:"gray",children:"Project Not Found"})]});return e.jsxs(Ie,{title:"Projects",user:s.auth.user,notification:s.notification,children:[e.jsxs(W,{opened:i,onClose:u,title:"Confirm Deletion",centered:!0,children:[e.jsxs(d,{children:["Are you sure you want to delete"," ",e.jsx("strong",{children:c==null?void 0:c.title}),"? This action cannot be undone."]}),e.jsxs(M,{cols:2,mt:"md",children:[e.jsx(T,{variant:"default",onClick:u,children:"Cancel"}),e.jsx(T,{color:"red",onClick:()=>{H(c),u()},children:"Delete"})]})]}),e.jsx(ke,{position:{bottom:16,left:16},style:{zIndex:2},display:{base:"block",lg:"none"},children:e.jsx(B,{label:"Settings Search",children:e.jsx($,{bg:"white",onClick:t=>{t.stopPropagation(),r()},variant:"outline",children:e.jsx(Ae,{})})})}),e.jsx(W,{opened:i,onClose:u,size:"xs",centered:!0,withCloseButton:!1,children:e.jsxs(C,{gap:32,children:[e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Search"}),e.jsx(Y,{leftSection:e.jsx(te,{}),placeholder:"Search by project title...",value:f,onChange:t=>U(t.target.value)})]}),e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Sort"}),e.jsx(h,{clearable:!0,leftSection:e.jsx(se,{}),placeholder:"Sort by...",value:a.key,data:[{label:"Title",value:"title"},{label:"Created At",value:"created_at"}],onChange:t=>D(t,a.direction)}),a.key&&e.jsx(h,{leftSection:a.direction==="asc"?e.jsx(ae,{}):e.jsx(le,{}),placeholder:"Direction...",value:a.direction,data:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],onChange:t=>D(a.key,t)})]}),e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Filter"}),e.jsx(h,{clearable:!0,leftSection:e.jsx(ne,{}),placeholder:"Filter by...",value:o,data:[{label:"Status",value:"status"}],onChange:t=>N(t,"")}),o&&e.jsx(h,{clearable:!0,leftSection:e.jsx(re,{}),placeholder:"Select status...",value:v,data:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:t=>N(o,t),mt:"sm"})]}),e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Items per page"}),e.jsx(h,{clearable:!1,leftSection:e.jsx(oe,{}),placeholder:"Select items per page...",value:G,data:[{label:"10",value:"10"},{label:"20",value:"20"},{label:"30",value:"30"},{label:"40",value:"40"},{label:"50",value:"50"}],onChange:K})]})]})}),e.jsxs(q,{justify:"space-between",align:"start",gap:16,children:[e.jsx(Ce,{title:"Projects",description:"Browse, manage, and track the progress of all projects within the system."}),s.auth.user.role==="Admin"&&e.jsxs(e.Fragment,{children:[e.jsx(B,{label:"Create Project",children:e.jsx($,{display:{base:"block",xs:"none"},onClick:()=>b.get(route("projects.create")),children:e.jsx(ie,{})})}),e.jsx(T,{leftSection:e.jsx(ie,{}),display:{base:"none",xs:"block"},onClick:()=>b.get(route("projects.create")),children:"Create Project"})]})]}),e.jsxs(F,{gutter:32,children:[e.jsx(F.Col,{span:{base:0,lg:3},children:e.jsxs(C,{gap:32,pos:"sticky",top:112,display:{base:"none",lg:i?"none":"flex"},children:[e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Search"}),e.jsx(Y,{leftSection:e.jsx(te,{}),placeholder:"Search by project name...",value:f,onChange:t=>U(t.target.value)})]}),e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Sort"}),e.jsx(h,{clearable:!0,leftSection:e.jsx(se,{}),placeholder:"Sort by...",value:a.key,data:[{label:"Title",value:"title"},{label:"Created At",value:"created_at"}],onChange:t=>D(t,a.direction)}),a.key&&e.jsx(h,{leftSection:a.direction==="asc"?e.jsx(ae,{}):e.jsx(le,{}),placeholder:"Direction...",value:a.direction,data:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],onChange:t=>D(a.key,t)})]}),e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Filter"}),e.jsx(h,{clearable:!0,leftSection:e.jsx(ne,{}),placeholder:"Filter by...",value:o,data:[{label:"Status",value:"status"}],onChange:t=>N(t,"")}),o&&e.jsx(h,{clearable:!0,leftSection:e.jsx(re,{}),placeholder:"Select status...",value:v,data:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:t=>N(o,t),mt:"sm"})]}),e.jsxs(g,{children:[e.jsx(d,{fw:500,children:"Items per page"}),e.jsx(h,{clearable:!1,leftSection:e.jsx(oe,{}),placeholder:"Select items per page...",value:G,data:[{label:"10",value:"10"},{label:"20",value:"20"},{label:"30",value:"30"},{label:"40",value:"40"},{label:"50",value:"50"}],onChange:K})]})]})}),e.jsxs(F.Col,{span:{base:12,lg:9},children:[e.jsxs(Z,{justify:"space-between",align:"center",mb:16,children:[e.jsxs(d,{size:"sm",children:["Showing ",s.projects.from," – ",s.projects.to," of"," ",s.projects.total]}),e.jsx(ee,{value:s.projects.current_page,onChange:O,total:s.projects.last_page,radius:"xs"})]}),R.length===0?je():X.length===0?fe():e.jsx(F,{gutter:"lg",children:X.map(t=>e.jsx(F.Col,{span:{base:12,sm:6},children:e.jsxs(Fe,{shadow:"xs",withBorder:!0,sx:{position:"relative"},style:{cursor:"pointer"},onClick:n=>{n.stopPropagation(),b.get(route("projects.show",t.id))},children:[e.jsxs(q,{direction:"column",children:[e.jsx(Be,{radius:16,style:{zIndex:1},color:t.deleted_at?"red":"green",inline:!0,flex:1,size:16,offset:7,position:"bottom-end",children:t.cover_photo_path?e.jsx(_e,{src:t.cover_photo_path,h:160}):e.jsx(A,{h:160,w:"100%",styles:{placeholder:{fontSize:26}},children:E(t.title)})}),e.jsx(L,{order:3,lineClamp:1,mt:16,children:t.title}),e.jsxs(d,{c:"ghost",size:"sm",children:["Created on"," ",new Date(t.created_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})," "]})]}),e.jsx(d,{color:"dimmed",size:"sm",my:16,lineClamp:1,children:t.description||"No description available"}),e.jsxs(M,{cols:2,children:[e.jsxs(C,{gap:8,children:[e.jsx(d,{fw:500,children:"Manager"}),e.jsx(B,{label:t.manager.full_name,withArrow:!0,children:e.jsx(A,{size:48,color:"orange",src:t.manager.profile_photo_path||void 0,children:!t.manager.profile_photo_path&&E(t.manager.full_name)})})]}),e.jsx(q,{justify:"flex-end",children:e.jsxs(C,{gap:8,children:[e.jsx(d,{fw:500,align:"end",children:"Members"}),e.jsxs(A.Group,{children:[t.working_on.slice(0,3).map(n=>e.jsx(B,{label:`${n.full_name} (${n.role})`,children:e.jsx(A,{size:48,color:n.role==="Developer"?"lime":n.role==="Quality Assurance"?"cyan":"gray",src:t.manager.profile_photo_path||void 0,children:!t.manager.profile_photo_path&&E(n.full_name)})},n.id)),t.working_on.length>3&&e.jsx(B,{label:t.working_on.slice(3).map(n=>`${n.full_name} (${n.role})`).join(", "),multiline:!0,width:200,children:e.jsxs(A,{color:"ghost",size:48,children:["+",t.working_on.length-3]})})]})]})})]}),s.auth.user.role==="Admin"&&e.jsxs(w,{shadow:"xs",withArrow:!0,arrowPosition:"center",children:[e.jsx(w.Target,{children:e.jsx($,{w:"100%",mt:16,variant:"subtle",color:"gray",onClick:n=>{n.stopPropagation()},children:e.jsx(De,{})})}),e.jsxs(w.Dropdown,{p:0,children:[e.jsx(w.Item,{h:48,color:"yellow",leftSection:e.jsx(ze,{}),onClick:n=>{n.stopPropagation(),ge(t)},children:"Edit"}),t.deleted_at?e.jsx(w.Item,{h:48,color:"green",leftSection:e.jsx(Ne,{}),onClick:n=>{n.stopPropagation(),xe(t)},children:"Activate"}):e.jsx(w.Item,{h:48,color:"red",leftSection:e.jsx(Pe,{}),onClick:n=>{n.stopPropagation(),H(t)},children:"Deactivate"})]})]})]})},t.id))}),e.jsxs(Z,{justify:"space-between",align:"center",mt:16,children:[e.jsxs(d,{size:"sm",children:["Showing ",s.projects.from," – ",s.projects.to," of"," ",s.projects.total]}),e.jsx(ee,{value:s.projects.current_page,onChange:O,total:s.projects.last_page,radius:"xs"})]})]})]})]})};export{We as default};
