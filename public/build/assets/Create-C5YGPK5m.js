import{b as j,j as e,h as n,G as b,d as f}from"./app-D1ROa2dk.js";import{P as C,G as r}from"./PageHeadings-CXlcB1tZ.js";import{S as v}from"./Select-CesD06S8.js";import{T as I,I as E}from"./Textarea-U4dTWsE9.js";import{T as D}from"./TextInput-DoMuMr3T.js";import{A as _,T as o,I as T,b as k,d as A,a as c}from"./AppLayout-6WbUBhn6.js";import{D as l,I as S,a as y}from"./index-Cv6aYTaw.js";import{I as z}from"./IconUpload-C8NJVJfc.js";import{I as B}from"./IconCornerDownLeft-WUnmPxyi.js";import"./Textarea-BE-ZIgh7.js";import"./index-1ieVv9Xz.js";const X=({project:a,users:d,auth:p})=>{const s=j({title:"",description:"",assignee_id:"",evidence_image:null});console.log(s.data);const g=i=>{const t=i.target.value;s.setData("title",t),t?s.clearErrors("title"):s.setError("title","Title is required.")},h=i=>{const t=i.target.value;s.setData("description",t),t?s.clearErrors("description"):s.setError("description","Description is required.")},u=i=>{s.setData("assignee_id",i),i?s.clearErrors("assignee_id"):s.setError("assignee_id","Assignee is required.")},m=i=>{const t=i[0];s.setData("evidence_image",t),t?s.clearErrors("evidence_image"):s.setError("evidence_image","Evidence image is required.")},x=i=>{i.preventDefault(),s.post(route("projects.bugs.store",{project:a.id}))};return e.jsx("form",{onSubmit:x,encType:"multipart/form-data",children:e.jsxs(_,{title:"Create Bug",user:p.user,children:[e.jsx(C,{title:"Create New Bug",description:"Provide the details to log a new bug in this project.",breadcrumbs:[{label:"Projects",onClick:()=>n.get(route("projects.index"))},{label:a.title,onClick:()=>n.get(route("projects.show",a.id))},{label:"Bugs",onClick:()=>n.get(route("projects.bugs",a))},{label:"Create",onClick:()=>n.get(route("projects.bugs.create",a))}]}),e.jsxs(r,{gutter:32,justify:"flex-end",children:[e.jsx(r.Col,{span:{base:12},children:e.jsxs(r,{gutter:8,align:"start",children:[e.jsx(r.Col,{span:{base:12,sm:4},children:e.jsx(o,{order:5,children:"Bug Title"})}),e.jsx(r.Col,{span:{base:12,sm:8},children:e.jsx(D,{placeholder:"Enter the bug title",value:s.data.title,onChange:g,error:s.errors.title,withAsterisk:!0,leftSection:e.jsx(T,{}),description:"Provide a concise and clear title for the bug."})})]})}),e.jsx(r.Col,{span:{base:12},children:e.jsxs(r,{gutter:8,align:"start",children:[e.jsx(r.Col,{span:{base:12,sm:4},children:e.jsx(o,{order:5,children:"Description"})}),e.jsx(r.Col,{span:{base:12,sm:8},children:e.jsx(I,{placeholder:"Describe the bug in detail",value:s.data.description,onChange:h,error:s.errors.description,minRows:4,description:`Include steps to reproduce, expected behavior, and any
                  relevant details.`,leftSection:e.jsx(E,{})})})]})}),e.jsx(r.Col,{span:{base:12},children:e.jsxs(r,{gutter:8,align:"start",children:[e.jsx(r.Col,{span:{base:12,sm:4},children:e.jsx(o,{order:5,children:"Assign To"})}),e.jsx(r.Col,{span:{base:12,sm:8},children:e.jsx(v,{placeholder:"Select a user to assign this bug",value:s.data.assignee_id,onChange:u,data:d.map(i=>({value:i.id,label:i.full_name})),error:s.errors.assignee_id,leftSection:e.jsx(k,{}),description:"Choose a user responsible for addressing this bug."})})]})}),e.jsx(r.Col,{span:{base:12},children:e.jsxs(r,{gutter:8,align:"start",children:[e.jsx(r.Col,{span:{base:12,sm:4},children:e.jsx(o,{order:5,children:"Evidence Image"})}),e.jsxs(r.Col,{span:{base:12,sm:8},children:[e.jsx(l,{onDrop:m,maxSize:5*1024**2,accept:S,children:e.jsxs(b,{justify:"center",gap:"xl",mih:220,style:{pointerEvents:"none"},children:[e.jsx(l.Accept,{children:e.jsx(z,{size:52,color:"var(--mantine-color-blue-6)",stroke:1.5})}),e.jsx(l.Reject,{children:e.jsx(A,{size:52,color:"var(--mantine-color-red-6)",stroke:1.5})}),e.jsx(l.Idle,{children:e.jsx(y,{size:52,color:"var(--mantine-color-dimmed)",stroke:1.5})}),e.jsxs("div",{children:[e.jsx(c,{size:"xl",inline:!0,children:"Drag images here or click to select files"}),e.jsx(c,{size:"sm",color:"dimmed",inline:!0,mt:7,children:"Attach as many files as you like, each file should not exceed 5MB"})]})]})}),s.errors.evidence_image&&e.jsx(c,{size:"sm",color:"red",mt:8,children:s.errors.evidence_image})]})]})}),e.jsx(r.Col,{span:{base:12,sm:8},align:"end",children:e.jsx(f,{type:"submit",leftSection:e.jsx(B,{}),disabled:s.processing||!s.data.title||!s.data.description,loading:s.processing,children:"Create Bug"})})]})]})})};export{X as default};
