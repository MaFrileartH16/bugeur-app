import{b as v,j as s,T as S,S as T,Y as y,q as c,c as I}from"./app-uL56QGf8.js";import{P as D}from"./PageHeadings-uEE45tAn.js";import{d as w,a as A,A as M,C as P,T as k}from"./AppLayout-DsLAsZh1.js";import{T as F}from"./Textarea-BplZxdSZ.js";import{I as q}from"./IconAlignJustified-BNH9hjpM.js";import{I as R}from"./IconUsers-CTK-DBC8.js";import{G as n}from"./Grid-DmBclv0S.js";import{T as U}from"./Text-C5tJwUvw.js";import{I as $}from"./IconCornerDownLeft-B1L78FcT.js";const Y=l=>{const{user:m}=l.auth,{project:o,managers:d,users:p}=l,e=v({title:o.title||"",description:o.description||"",manager_id:o.manager_id||"",team_members:o.working_on.map(t=>t.id)||[]}),i=(t,r)=>!r||Array.isArray(r)&&r.length===0?`${t.replace("_id","").replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())} is required.`:null,h=t=>{const r=t.target.value;e.setData("title",r);const a=i("title",r);a?e.setError("title",a):e.clearErrors("title")},u=t=>{const r=t.target.value;e.setData("description",r);const a=i("description",r);a?e.setError("description",a):e.clearErrors("description")},g=t=>{e.setData("manager_id",t);const r=i("manager_id",t);r?e.setError("manager_id",r):e.clearErrors("manager_id")},b=t=>{e.setData("team_members",t);const r=i("team_members",t);r?e.setError("team_members",r):e.clearErrors("team_members")},f=t=>{t.preventDefault();const r=i("team_members",e.data.team_members);if(r){e.setError("team_members",r);return}e.put(route("projects.update",o.id),{onFinish:()=>e.reset()})},j=[{label:"Title",value:e.data.title,onChange:h,error:e.errors.title,placeholder:"Enter the project's title, e.g., Website Redesign",description:"Provide a concise and descriptive title for the project.",leftSection:s.jsx(w,{}),component:S},{label:"Description",value:e.data.description,onChange:u,error:e.errors.description,placeholder:"Describe the project's objectives and scope",description:"Include key details and objectives to help the team understand the project.",component:F,leftSection:s.jsx(q,{}),minRows:4},{label:"Manager",value:e.data.manager_id,onChange:g,error:e.errors.manager_id,placeholder:"Select a project manager",description:"Assign a manager who will oversee the project.",leftSection:s.jsx(A,{}),component:T,data:d.map(t=>({value:t.id,label:t.full_name}))},{label:"Team Members",value:e.data.team_members,onChange:b,error:e.errors.team_members,placeholder:"Select team members",description:"Include at least one Developer and one Quality Assurance member.",leftSection:s.jsx(R,{}),component:y,data:p.map(t=>({value:t.id,label:`${t.full_name} (${t.role})`}))}],x=Object.keys(e.errors).length>0,_=!e.data.title||!e.data.description||!e.data.manager_id||e.data.team_members.length===0;return s.jsx("form",{onSubmit:f,children:s.jsx(M,{title:"Edit Project",user:m,children:s.jsxs(P,{flex:1,size:"xl",w:"100%",py:32,children:[s.jsx(D,{title:"Edit Project",description:"Modify the details of the project to ensure it reflects the latest requirements.",breadcrumbs:[{label:"Projects",onClick:()=>c.get(route("projects.index"))},{label:"Edit",onClick:()=>c.get(route("projects.edit",o.id))}]}),s.jsxs(n,{gutter:32,justify:"flex-end",children:[j.map(({component:t,label:r,description:a,...C},E)=>s.jsx(n.Col,{span:{base:12},children:s.jsxs(n,{gutter:{base:8,sm:0},align:"start",children:[s.jsx(n.Col,{span:{base:12,sm:4},children:s.jsx(k,{order:5,children:r})}),s.jsxs(n.Col,{span:{base:12,sm:8},children:[s.jsx(t,{...C}),a&&s.jsx(U,{size:"xs",color:"dimmed",mt:8,children:a})]})]})},E)),s.jsx(n.Col,{span:{base:12,sm:8,smOffset:4},children:s.jsx(I,{type:"submit",fullWidth:!0,leftSection:s.jsx($,{}),disabled:e.processing||x||_,loading:e.processing,children:"Save Changes"})})]})]})})})};export{Y as default};
