import{b as v,j as e,G as b,X as C,c,T as d,P as w}from"./app-uL56QGf8.js";import{P as y}from"./PageHeadings-uEE45tAn.js";import{c as P,A as E,T as l,a as I}from"./AppLayout-DsLAsZh1.js";import{G as s}from"./Grid-DmBclv0S.js";import{F as k}from"./FileButton-Bo-xs6BT.js";import{T as A}from"./Text-C5tJwUvw.js";import{I as M}from"./IconKey-CnVVK9Oq.js";import{I as S}from"./IconMail-RMfwkb07.js";import{I as O}from"./IconPassword-BMyge5rv.js";import{I as T}from"./IconCornerDownLeft-B1L78FcT.js";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G=P("outline","photo-up","IconPhotoUp",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526",key:"svg-3"}],["path",{d:"M19 22v-6",key:"svg-4"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-5"}]]);const W=i=>{const{user:n}=i.auth,a=v({_method:"put",avatar:n.avatar||"",full_name:n.full_name||"",email:n.email||"",password:""});console.log(a.data);const u=r=>r&&!["image/png","image/jpeg","image/jpg"].includes(r.type)?"Only PNG, JPEG, and JPG formats are allowed.":r&&r.size>2*1024*1024?"File size must not exceed 2 MB.":null,p=r=>{const t=u(r);if(t){a.setError("avatar",t);return}a.setData("avatar",r),a.clearErrors("avatar")},h=r=>r?r.endsWith("@bugeur.id")?null:"Email must use @bugeur.id.":"Email Address is required.",m=r=>r&&r.length<8?"Password must be at least 8 characters.":null,g=r=>{const t=r.target.value;a.setData("email",t);const o=h(t);o?a.setError("email",o):a.clearErrors("email")},j=r=>{const t=r.target.value;a.setData("password",t);const o=m(t);o?a.setError("password",o):a.clearErrors("password")},x=r=>{r.preventDefault(),a.post(route("profile.update",n),{onFinish:()=>a.reset("password")})},f=Object.keys(a.errors).length>0;return e.jsx("form",{onSubmit:x,children:e.jsxs(E,{title:i.title,user:n,notification:i.notification,children:[e.jsx(y,{title:"Profile",description:"Access and update your account details, including personal information and preferences."}),e.jsxs(s,{gutter:16,justify:"flex-end",children:[e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Avatar"})}),e.jsxs(s.Col,{span:{base:12,sm:8},children:[e.jsxs(b,{align:"flex-start",spacing:"sm",children:[e.jsx(C,{src:a.data.avatar instanceof File?URL.createObjectURL(a.data.avatar):a.data.avatar,alt:a.data.full_name,size:80}),e.jsx(k,{onChange:p,accept:"image/png,image/jpeg,image/jpg",children:r=>e.jsx(c,{variant:"subtle",...r,leftSection:e.jsx(G,{}),children:"Upload Photo"})})]}),a.errors.avatar&&e.jsx(A,{color:"red",size:"sm",children:a.errors.avatar})]})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Full Name"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(d,{value:a.data.full_name,placeholder:"e.g., John Doe",description:"This is your full name as it appears on your profile. It cannot be edited.",leftSection:e.jsx(I,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Role"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(d,{value:n.role,placeholder:"e.g., Project Manager",description:"Your assigned role within the system. This field is not editable.",leftSection:e.jsx(M,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"Email Address"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(d,{value:a.data.email,onChange:g,error:a.errors.email,placeholder:"e.g., johndoe@bugeur.id",description:"Your email address used for login and communication. It cannot be changed.",leftSection:e.jsx(S,{}),readOnly:!0,disabled:!0})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(l,{order:5,children:"New Password"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(w,{value:a.data.password,onChange:j,error:a.errors.password,placeholder:"Leave this blank to keep your current password",description:"Enter a new password if you wish to update it. Otherwise, leave it blank.",leftSection:e.jsx(O,{})})})]})}),e.jsx(s.Col,{span:{base:12,sm:8,smOffset:4},children:e.jsx(c,{type:"submit",fullWidth:!0,leftSection:e.jsx(T,{}),disabled:a.processing||f,loading:a.processing,children:"Save Changes"})})]})]})})};export{W as default};
