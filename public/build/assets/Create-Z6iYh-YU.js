import{b as x,j as r,T as u,S as g,P as C,c as w}from"./app-l3PHe4uA.js";import{b as v,A as y,C as E,T as m}from"./AppLayout-C8W-FPwP.js";import{I}from"./IconMail-DeRBIQvH.js";import{I as _}from"./IconKey-DuKxvrae.js";import{I as S}from"./IconPassword-Dq0ghy8j.js";import{G as o}from"./Grid-ytByML-q.js";const L=i=>{const{user:c}=i.auth,e=x({full_name:"",email:"",role:"",password:""}),p=(s,l)=>l?s==="email"&&!l.endsWith("@bugeur.id")?"Email must use @bugeur.id.":null:`${s.replace("_"," ").replace(/^\w/,t=>t.toUpperCase())} is required.`,n=s=>l=>{let a=l.target?l.target.value:l;s==="full_name"?a=a.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):s==="email"&&(a=a.replace(/\s+/g,"").toLowerCase(),e.setData("password",a)),e.setData(s,a);const t=p(s,a);t?e.setError(s,t):e.clearErrors(s)},h=s=>{s.preventDefault(),e.post(route("users.store"),{onFinish:()=>e.reset()})},f=!e.data.full_name||!e.data.email||!e.data.role,b=[{label:"Full Name",value:e.data.full_name,onChange:n("full_name"),error:e.errors.full_name,placeholder:"Enter the user's full name",leftSection:r.jsx(v,{}),component:u},{label:"Email Address",value:e.data.email,onChange:n("email"),error:e.errors.email,placeholder:"Enter the user's email address (e.g., username@bugeur.id)",leftSection:r.jsx(I,{}),component:u},{label:"Role",onChange:n("role"),error:e.errors.role,placeholder:"Choose the user's role",leftSection:r.jsx(_,{}),component:g,data:[{value:"project_manager",label:"Project Manager"},{value:"developer",label:"Developer"},{value:"quality_assurance",label:"Quality Assurance"}]},{label:"Password",value:e.data.password,onChange:n("password"),error:e.errors.password,placeholder:"Password is auto-filled based on email",leftSection:r.jsx(S,{}),component:C,readOnly:!0,disabled:!0}],j=Object.keys(e.errors).length>0;return r.jsx("form",{onSubmit:h,children:r.jsx(y,{title:i.title,user:c,children:r.jsxs(E,{flex:1,size:"xl",w:"100%",py:32,children:[r.jsx(m,{mb:32,children:i.title}),r.jsxs(o,{gutter:16,justify:"flex-end",children:[b.map(({component:s,label:l,...a},t)=>r.jsx(o.Col,{span:{base:12},children:r.jsxs(o,{gutter:{base:8,sm:0},align:"center",children:[r.jsx(o.Col,{span:{base:12,sm:4},children:r.jsx(m,{order:5,children:l})}),r.jsx(o.Col,{span:{base:12,sm:8},children:r.jsx(s,{...a})})]})},t)),r.jsx(o.Col,{span:{base:12,sm:8,smOffset:4},children:r.jsx(w,{type:"submit",fullWidth:!0,disabled:e.processing||j||f,loading:e.processing,children:"Add User"})})]})]})})})};export{L as default};
