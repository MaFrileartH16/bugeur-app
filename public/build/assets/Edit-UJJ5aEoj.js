import{a as v,j as a,p as S,S as y,Y as I,o as c,b as D}from"./app-C9ln7LQQ.js";import{P as T}from"./PageHeadings-BuYZZvPj.js";import{e as w,b as A,A as M,T as P,a as k}from"./AppLayout-ByFfe6H_.js";import{T as F}from"./Textarea-CqXDHGcP.js";import{I as R}from"./IconAlignJustified-Dyr1F_du.js";import{I as U}from"./IconUsers-Dj93ScRV.js";import{C as $}from"./Container-BETNahqj.js";import{G as n}from"./Grid-Br5EmCLj.js";import{I as q}from"./IconCornerDownLeft-Cey7VFcl.js";const Y=l=>{const{user:m}=l.auth,{project:o,managers:d,users:p}=l,e=v({title:o.title||"",description:o.description||"",manager_id:o.manager_id||"",team_members:o.working_on.map(t=>t.id)||[]}),i=(t,r)=>!r||Array.isArray(r)&&r.length===0?`${t.replace("_id","").replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())} is required.`:null,h=t=>{const r=t.target.value;e.setData("title",r);const s=i("title",r);s?e.setError("title",s):e.clearErrors("title")},u=t=>{const r=t.target.value;e.setData("description",r);const s=i("description",r);s?e.setError("description",s):e.clearErrors("description")},g=t=>{e.setData("manager_id",t);const r=i("manager_id",t);r?e.setError("manager_id",r):e.clearErrors("manager_id")},b=t=>{e.setData("team_members",t);const r=i("team_members",t);r?e.setError("team_members",r):e.clearErrors("team_members")},f=t=>{t.preventDefault();const r=i("team_members",e.data.team_members);if(r){e.setError("team_members",r);return}e.put(route("projects.update",o.id),{onFinish:()=>e.reset()})},j=[{label:"Title",value:e.data.title,onChange:h,error:e.errors.title,placeholder:"Enter the project's title, e.g., Website Redesign",description:"Provide a concise and descriptive title for the project.",leftSection:a.jsx(w,{}),component:S},{label:"Description",value:e.data.description,onChange:u,error:e.errors.description,placeholder:"Describe the project's objectives and scope",description:"Include key details and objectives to help the team understand the project.",component:F,leftSection:a.jsx(R,{}),minRows:4},{label:"Manager",value:e.data.manager_id,onChange:g,error:e.errors.manager_id,placeholder:"Select a project manager",description:"Assign a manager who will oversee the project.",leftSection:a.jsx(A,{}),component:y,data:d.map(t=>({value:t.id,label:t.full_name}))},{label:"Team Members",value:e.data.team_members,onChange:b,error:e.errors.team_members,placeholder:"Select team members",description:"Include at least one Developer and one Quality Assurance member.",leftSection:a.jsx(U,{}),component:I,data:p.map(t=>({value:t.id,label:`${t.full_name} (${t.role})`}))}],x=Object.keys(e.errors).length>0,_=!e.data.title||!e.data.description||!e.data.manager_id||e.data.team_members.length===0;return a.jsx("form",{onSubmit:f,children:a.jsx(M,{title:"Edit Project",user:m,children:a.jsxs($,{flex:1,size:"xl",w:"100%",py:32,children:[a.jsx(T,{title:"Edit Project",description:"Modify the details of the project to ensure it reflects the latest requirements.",breadcrumbs:[{label:"Projects",onClick:()=>c.get(route("projects.index"))},{label:"Edit",onClick:()=>c.get(route("projects.edit",o.id))}]}),a.jsxs(n,{gutter:32,justify:"flex-end",children:[j.map(({component:t,label:r,description:s,...C},E)=>a.jsx(n.Col,{span:{base:12},children:a.jsxs(n,{gutter:{base:8,sm:0},align:"start",children:[a.jsx(n.Col,{span:{base:12,sm:4},children:a.jsx(P,{order:5,children:r})}),a.jsxs(n.Col,{span:{base:12,sm:8},children:[a.jsx(t,{...C}),s&&a.jsx(k,{size:"xs",color:"dimmed",mt:8,children:s})]})]})},E)),a.jsx(n.Col,{span:{base:12,sm:8,smOffset:4},children:a.jsx(D,{type:"submit",fullWidth:!0,leftSection:a.jsx(q,{}),disabled:e.processing||x||_,loading:e.processing,children:"Save Changes"})})]})]})})})};export{Y as default};
