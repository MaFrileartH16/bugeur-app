import{r as c,j as e,M as L,c as d,K as y,q as a,T as F,X as Q,G as N,$ as q}from"./app-uL56QGf8.js";import{P as V}from"./PageHeadings-uEE45tAn.js";import{u as H,A as K,C as O,F as R,e as X,M as n,T as h,B as J,S as C}from"./AppLayout-DsLAsZh1.js";import{T as u}from"./Text-C5tJwUvw.js";import{S as W,I as w}from"./IconPlus-rI_BKYI-.js";import{C as x}from"./Card-DGzw9oJ5.js";import{I as Y,a as Z,b as ee,c as se}from"./IconSearch-B7jH9ZRU.js";import{G as S}from"./Grid-DmBclv0S.js";import{I as te}from"./IconTrash-R-D4yrDy.js";import{I as re}from"./IconUsers-CTK-DBC8.js";const me=r=>{const[m,b]=c.useState(""),[I,{open:v,close:l}]=H(!1),[o,P]=c.useState(null),[i,D]=c.useState(r.users.current_page),{data:g,last_page:T,total:p,per_page:j}=r.users,k=s=>{const t=s.trim().split(" ");return t.length===1?t[0][0].toUpperCase():`${t[0][0]}${t.at(-1)[0]}`.toUpperCase()},A=s=>{a.get(route("users.edit",s.id))},U=()=>{o&&a.delete(route("users.destroy",o.id),{onSuccess:l})},M=s=>{P(s),v()},_=[{label:"Edit",action:A,leftSection:e.jsx(ee,{}),color:"yellow"},{label:"Delete",action:M,leftSection:e.jsx(te,{}),color:"red"}],f=g.filter(s=>{const t=m.toLowerCase();return s.full_name.toLowerCase().includes(t)||s.role.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)}),z=s=>{D(s),a.get(route("users.index"),{page:s})},B=`Showing ${j*(i-1)+1} â€“ ${Math.min(p,j*i)} of ${p}`,$=()=>e.jsxs(C,{align:"center",py:32,spacing:"xs",children:[e.jsx(re,{size:48,color:"gray"}),e.jsx(h,{order:3,c:"gray",children:"No users available yet."})]}),E=()=>e.jsxs(C,{align:"center",py:32,spacing:"xs",children:[e.jsx(se,{size:48,color:"gray"}),e.jsx(h,{order:3,c:"gray",children:"User Not Found"})]});return e.jsxs(K,{title:r.title,user:r.auth.user,notification:r.notification,children:[e.jsxs(L,{opened:I,onClose:l,title:"Confirm Deletion",centered:!0,children:[e.jsxs(u,{children:["Are you sure you want to delete"," ",e.jsx("strong",{children:o==null?void 0:o.full_name}),"? This action cannot be undone."]}),e.jsxs(W,{cols:2,mt:"md",children:[e.jsx(d,{variant:"default",onClick:l,children:"Cancel"}),e.jsx(d,{color:"red",onClick:U,children:"Delete"})]})]}),e.jsxs(O,{flex:1,size:"xl",w:"100%",my:32,children:[e.jsxs(R,{justify:"space-between",align:"start",gap:16,children:[e.jsx(V,{title:"Users",description:"View, manage, and assign roles to user accounts within the system."}),e.jsx(X,{label:"Craete User",children:e.jsx(y,{display:{base:"block",xs:"none"},onClick:()=>a.get(route("users.create")),children:e.jsx(w,{})})}),e.jsx(d,{leftSection:e.jsx(w,{}),display:{base:"none",xs:"block"},onClick:()=>a.get(route("users.create")),children:"Create User"})]}),e.jsxs(x,{withBorder:!0,shadow:"xs",children:[e.jsx(x.Section,{withBorder:!0,p:16,children:e.jsx(F,{leftSection:e.jsx(Y,{}),placeholder:"Search by name, email, or role...",value:m,onChange:s=>b(s.target.value)})}),g.length===0?$():f.length===0?E():e.jsx(S,{pt:16,gutter:"lg",children:f.map(s=>e.jsx(S.Col,{span:{base:12,sm:6,md:4,lg:3},children:e.jsxs(x,{shadow:"xs",radius:"md",withBorder:!0,children:[e.jsxs(n,{shadow:"xl",position:"bottom-end",withArrow:!0,arrowPosition:"center",children:[e.jsx(n.Target,{children:e.jsx(y,{pos:"absolute",variant:"subtle",color:"ghost",right:16,children:e.jsx(Z,{})})}),e.jsx(n.Dropdown,{p:0,children:_.map((t,G)=>e.jsx(n.Item,{leftSection:t.leftSection,onClick:()=>t.action(s),color:t.color||void 0,h:48,children:t.label},G))})]}),e.jsx(Q,{mx:"auto",size:64,color:s.role==="Project Manager"?"magic":s.role==="Developer"?"peach":s.role==="Quality Assurance"?"soap":"default",children:k(s.full_name)}),e.jsx(h,{order:3,align:"center",mt:16,lineClamp:1,children:s.full_name}),e.jsx(u,{align:"center",c:"ghost",size:"sm",mb:16,children:s.email}),e.jsx(J,{mx:"auto",color:s.role==="Project Manager"?"magic":s.role==="Developer"?"peach":s.role==="Quality Assurance"?"soap":"default",variant:"light",children:s.role})]})},s.id))}),e.jsxs(N,{justify:"space-between",align:"center",mt:16,children:[e.jsx(u,{size:"sm",children:B}),e.jsx(q,{value:i,onChange:z,total:T,radius:"xs"})]})]})]})]})};export{me as default};
