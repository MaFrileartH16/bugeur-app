import{b as j,j as s,T as x,S as _,H as A,c as C}from"./app-l3PHe4uA.js";import{I as y,b as S,A as v,C as E,T as d}from"./AppLayout-C8W-FPwP.js";import{T}from"./Textarea-BF3NX1nc.js";import{I}from"./IconAlignJustified-Bb4jN-MM.js";import{I as D}from"./IconUsers-CKgdAAUf.js";import{G as l}from"./Grid-ytByML-q.js";const U=o=>{const{user:u}=o.auth,e=j({title:"",description:"",manager_id:"",team_members:[]}),p=r=>{const t=o.users.filter(i=>r.includes(i.id));console.log(t);const n=t.some(i=>i.role==="Developer"),a=t.some(i=>i.role==="Quality Assurance");return!n&&!a?"At least one Developer and one Quality Assurance are required.":n?a?null:"At least one Quality Assurance is required.":"At least one Developer is required."},c=(r,t)=>(console.log(r,t),r==="team_members"?p(t):!t||Array.isArray(t)&&t.length===0?`${r.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())} is required.`:null),m=r=>t=>{const n=t.target?t.target.value:t;e.setData(r,n);const a=c(r,n);a?e.setError(r,a):e.clearErrors(r)},h=r=>{r.preventDefault();const t=c("team_members",e.data.team_members);if(t){e.setError("team_members",t);return}e.post(route("projects.store"),{onFinish:()=>e.reset()})},b=!e.data.title||!e.data.description||!e.data.manager_id||e.data.team_members.length===0,f=[{label:"Title",value:e.data.title,onChange:m("title"),error:e.errors.title,placeholder:"Enter the project's title",leftSection:s.jsx(y,{}),component:x},{label:"Description",value:e.data.description,onChange:m("description"),error:e.errors.description,placeholder:"Enter the project's description",component:T,leftSection:s.jsx(I,{}),minRows:4},{label:"Manager",onChange:m("manager_id"),error:e.errors.manager_id,placeholder:"Select a manager",leftSection:s.jsx(S,{}),component:_,data:o.managers.map(r=>({value:r.id,label:r.full_name}))},{label:"Team Members",value:e.data.team_members,onChange:m("team_members"),error:e.errors.team_members,placeholder:"Select team members",leftSection:s.jsx(D,{}),component:A,data:o.users.map(r=>({value:r.id,label:`${r.full_name} (${r.role})`})),nothingFoundMessage:"No team members found."}],g=Object.keys(e.errors).length>0;return s.jsx("form",{onSubmit:h,children:s.jsx(v,{title:o.title,user:u,children:s.jsxs(E,{flex:1,size:"xl",w:"100%",py:32,children:[s.jsx(d,{mb:32,children:o.title}),s.jsxs(l,{gutter:16,justify:"flex-end",children:[f.map(({component:r,label:t,...n},a)=>s.jsx(l.Col,{span:{base:12},children:s.jsxs(l,{gutter:{base:8,sm:0},align:"center",children:[s.jsx(l.Col,{span:{base:12,sm:4},children:s.jsx(d,{order:5,children:t})}),s.jsx(l.Col,{span:{base:12,sm:8},children:s.jsx(r,{...n})})]})},a)),s.jsx(l.Col,{span:{base:12,sm:8,smOffset:4},children:s.jsx(C,{type:"submit",fullWidth:!0,disabled:e.processing||g||b,loading:e.processing,children:"Add Project"})})]})]})})})};export{U as default};
