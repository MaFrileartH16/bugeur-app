import{b as _,j as r,T as C,S as v,H as y,h as m,c as S}from"./app-RcAloIyv.js";import{P as E,T as I}from"./PageHeadings-CIjb8soY.js";import{I as T,b as A,A as w,C as D,T as P}from"./AppLayout-Br51ywqD.js";import{T as k}from"./Textarea-A9TA2VB7.js";import{I as F}from"./IconAlignJustified-DcdxybjQ.js";import{I as M}from"./IconUsers-CJ8RwsaL.js";import{G as n}from"./Grid-D53SFOGt.js";import{I as R}from"./IconCornerDownLeft-D7W_spy8.js";const W=c=>{const{user:p}=c.auth,{project:o,managers:h,users:u}=c,e=_({title:o.title||"",description:o.description||"",manager_id:o.manager_id||"",team_members:o.working_on.map(t=>t.id)||[]}),d=(t,s)=>!s||Array.isArray(s)&&s.length===0?`${t.replace("_id","").replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())} is required.`:null,i=t=>s=>{const a=Array.isArray(s)?s:s.target.value;e.setData(t,a);const l=d(t,a);l?e.setError(t,l):e.clearErrors(t)},j=t=>{t.preventDefault();const s=d("team_members",e.data.team_members);if(s){e.setError("team_members",s);return}e.put(route("projects.update",o.id),{onFinish:()=>e.reset()})},b=[{label:"Title",value:e.data.title,onChange:i("title"),error:e.errors.title,placeholder:"Enter the project's title, e.g., Website Redesign",description:"Provide a concise and descriptive title for the project.",leftSection:r.jsx(T,{}),component:C},{label:"Description",value:e.data.description,onChange:i("description"),error:e.errors.description,placeholder:"Describe the project's objectives and scope",description:"Include key details and objectives to help the team understand the project.",component:k,leftSection:r.jsx(F,{}),minRows:4},{label:"Manager",value:e.data.manager_id,onChange:i("manager_id"),error:e.errors.manager_id,placeholder:"Select a project manager",description:"Assign a manager who will oversee the project.",leftSection:r.jsx(A,{}),component:v,data:h.map(t=>({value:t.id,label:t.full_name}))},{label:"Team Members",value:e.data.team_members,onChange:i("team_members"),error:e.errors.team_members,placeholder:"Select team members",description:"Include at least one Developer and one Quality Assurance member.",leftSection:r.jsx(M,{}),component:y,data:u.map(t=>({value:t.id,label:`${t.full_name} (${t.role})`}))}],g=Object.keys(e.errors).length>0,f=!e.data.title||!e.data.description||!e.data.manager_id||e.data.team_members.length===0;return r.jsx("form",{onSubmit:j,children:r.jsx(w,{title:"Edit Project",user:p,children:r.jsxs(D,{flex:1,size:"xl",w:"100%",py:32,children:[r.jsx(E,{title:"Edit Project",description:"Modify the details of the project to ensure it reflects the latest requirements.",breadcrumbs:[{label:"Projects",onClick:()=>m.get(route("projects.index"))},{label:"Edit",onClick:()=>m.get(route("projects.edit",o.id))}]}),r.jsxs(n,{gutter:16,justify:"flex-end",children:[b.map(({component:t,label:s,description:a,...l},x)=>r.jsx(n.Col,{span:{base:12},children:r.jsxs(n,{gutter:{base:8,sm:0},align:"center",children:[r.jsx(n.Col,{span:{base:12,sm:4},children:r.jsx(P,{order:5,children:s})}),r.jsxs(n.Col,{span:{base:12,sm:8},children:[r.jsx(t,{...l}),a&&r.jsx(I,{size:"xs",color:"dimmed",mt:8,children:a})]})]})},x)),r.jsx(n.Col,{span:{base:12,sm:8,smOffset:4},children:r.jsx(S,{type:"submit",fullWidth:!0,leftSection:r.jsx(R,{}),disabled:e.processing||g||f,loading:e.processing,children:"Save Changes"})})]})]})})})};export{W as default};
