import{b as P,j as e,h as j,G as d,x as E,d as m}from"./app-D1ROa2dk.js";import{P as M,G as s}from"./PageHeadings-CXlcB1tZ.js";import{M as k}from"./MultiSelect-DmQ7hl-C.js";import{S as D}from"./Select-CesD06S8.js";import{T as S,I as T}from"./Textarea-U4dTWsE9.js";import{T as w}from"./TextInput-DoMuMr3T.js";import{c as g,A as F,T as i,F as G,d as z,a as h,e as A,b as R}from"./AppLayout-6WbUBhn6.js";import{D as l,I as U,a as J}from"./index-Cv6aYTaw.js";import{F as O}from"./FileButton-fRe6bWuF.js";import{I as B}from"./IconUpload-C8NJVJfc.js";import{I as L}from"./IconUsers-BWlCuh-V.js";import{I as N}from"./IconCornerDownLeft-WUnmPxyi.js";import"./Textarea-BE-ZIgh7.js";import"./index-1ieVv9Xz.js";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var X=g("outline","photo-up","IconPhotoUp",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526",key:"svg-3"}],["path",{d:"M19 22v-6",key:"svg-4"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $=g("outline","photo-x","IconPhotoX",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M13 21h-7a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v7",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0",key:"svg-3"}],["path",{d:"M22 22l-5 -5",key:"svg-4"}],["path",{d:"M17 22l5 -5",key:"svg-5"}]]);const ne=c=>{const{user:x}=c.auth,r=P({cover_photo:"",title:"",description:"",manager_id:"",team_members:[]}),n=(t,a)=>!a||Array.isArray(a)&&a.length===0?`${t.replace("_id","").replace("_"," ").replace(/\b\w/g,o=>o.toUpperCase())} is required.`:null,u=t=>{const a=t.target.value;r.setData("title",a);const o=n("title",a);o?r.setError("title",o):r.clearErrors("title")},v=t=>{const a=t.target.value;r.setData("description",a);const o=n("description",a);o?r.setError("description",o):r.clearErrors("description")},b=t=>{r.setData("manager_id",t);const a=n("manager_id",t);a?r.setError("manager_id",a):r.clearErrors("manager_id")},f=t=>{r.setData("team_members",t);const a=n("team_members",t);a?r.setError("team_members",a):r.clearErrors("team_members")},C=t=>{t.preventDefault();const a=n("team_members",r.data.team_members);if(a){r.setError("team_members",a);return}r.post(route("projects.store"),{onFinish:()=>r.reset()})},_=t=>t&&!["image/png","image/jpeg","image/jpg"].includes(t.type)?"Only PNG, JPEG, and JPG formats are allowed.":t&&t.size>2*1024*1024?"File size must not exceed 2 MB.":null,p=t=>{const a=_(t);if(a){r.setError("cover_photo",a);return}r.setData("cover_photo",t),r.clearErrors("cover_photo")},y=Object.keys(r.errors).length>0,I=!r.data.title||!r.data.description||!r.data.manager_id||r.data.team_members.length===0;return e.jsx("form",{onSubmit:C,encType:"multipart/form-data",children:e.jsxs(F,{title:"Create Project",user:x,children:[e.jsx(M,{title:"Create New Project",description:"Provide the necessary details to start and define a new project within the system.",breadcrumbs:[{label:"Projects",onClick:()=>j.get(route("projects.index"))},{label:"Create",onClick:()=>j.get(route("projects.create"))}]}),e.jsxs(s,{gutter:32,justify:"flex-end",children:[e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:8,align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(i,{order:5,children:"Cover Photo"})}),e.jsxs(s.Col,{span:{base:12,sm:8},children:[r.data.cover_photo?e.jsxs(d,{align:"flex-start",spacing:"sm",children:[e.jsx(G,{w:"100%",children:e.jsx(E,{radius:16,src:r.data.cover_photo instanceof File?URL.createObjectURL(r.data.cover_photo):r.data.cover_photo,alt:"Cover Photo",flex:1,height:240,style:{objectFit:"cover"}})}),e.jsxs(d,{children:[e.jsx(O,{onChange:p,accept:"image/png,image/jpeg,image/jpg",children:t=>e.jsx(m,{c:"blue",variant:"subtle",...t,leftSection:e.jsx(X,{}),children:"Change"})}),e.jsx(m,{variant:"subtle",color:"red",onClick:()=>r.setData("cover_photo",""),leftSection:e.jsx($,{}),children:"Remove"})]})]}):e.jsx(l,{h:240,display:"flex",style:{justifyContent:"center",alignItems:"center"},onDrop:t=>p(t[0]),onReject:()=>r.setError("cover_photo","File rejected. Only images are allowed."),maxSize:2*1024*1024,accept:U,children:e.jsxs(d,{justify:"center",gap:"xl",style:{pointerEvents:"none"},children:[e.jsx(l.Accept,{children:e.jsx(B,{size:48,color:"var(--mantine-color-blue-6)",stroke:1.5})}),e.jsx(l.Reject,{children:e.jsx(z,{size:48,color:"var(--mantine-color-red-6)",stroke:1.5})}),e.jsx(l.Idle,{children:e.jsx(J,{size:48,color:"var(--mantine-color-dimmed)",stroke:1.5})}),e.jsxs("div",{children:[e.jsx(h,{size:"md",inline:!0,children:"Drag image here or click to select file"}),e.jsx(h,{size:"sm",c:"dimmed",inline:!0,mt:8,children:"Only PNG, JPEG, and JPG files are allowed (max 2MB)."})]})]})}),r.errors.cover_photo&&e.jsx(h,{c:"red",size:"sm",mt:"sm",children:r.errors.cover_photo})]})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(i,{order:5,children:"Title"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(w,{value:r.data.title,onChange:u,error:r.errors.title,placeholder:"Enter the project's title, e.g., Website Redesign",leftSection:e.jsx(A,{}),description:"Provide a concise and descriptive title for the project."})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(i,{order:5,children:"Description"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(S,{value:r.data.description,onChange:v,error:r.errors.description,placeholder:"Describe the project's objectives and scope",leftSection:e.jsx(T,{}),minRows:4,description:`Include key details and objectives to help the team understand
                  the project.`})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(i,{order:5,children:"Manager"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(D,{defaultValue:r.data.manager_id,onChange:b,error:r.errors.manager_id,placeholder:"Select a project manager",leftSection:e.jsx(R,{}),data:c.managers.map(t=>({value:t.id,label:t.full_name})),description:"Assign a manager who will oversee the project."})})]})}),e.jsx(s.Col,{span:{base:12},children:e.jsxs(s,{gutter:{base:8,sm:0},align:"start",children:[e.jsx(s.Col,{span:{base:12,sm:4},children:e.jsx(i,{order:5,children:"Team Members"})}),e.jsx(s.Col,{span:{base:12,sm:8},children:e.jsx(k,{value:r.data.team_members,onChange:f,error:r.errors.team_members,placeholder:"Select team members",leftSection:e.jsx(L,{}),data:c.members.map(t=>({value:t.id,label:`${t.full_name} (${t.role})`})),description:`Include at least one Developer and one Quality Assurance
                  member.`})})]})}),e.jsx(s.Col,{span:{base:12,sm:8},align:"end",children:e.jsx(m,{type:"submit",leftSection:e.jsx(N,{}),disabled:r.processing||y||I,loading:r.processing,children:"Create Project"})})]})]})})};export{ne as default};
