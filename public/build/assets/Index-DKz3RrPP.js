import{j as e,a5 as i,G as k,r as c,A as C,M as O,B as o,h as d,d as Y,L as Z}from"./app-D1ROa2dk.js";import{c as v,u as ee,A as ae,f as le,g as F,S as I,a as r,F as te,T as se,C as re,h as ne,B as oe,M as h,d as ie}from"./AppLayout-6WbUBhn6.js";import{P as ce,G as j}from"./PageHeadings-CXlcB1tZ.js";import{S as n}from"./Select-CesD06S8.js";import{T as R}from"./TextInput-DoMuMr3T.js";import{i as K,I as de,a as L,b as Q,c as B,d as E,e as N,f as U,g as T,C as he,h as ue,j as xe}from"./IconSortDescendingLetters-DmOYoflD.js";import{I as $}from"./IconPlus-BLphxDSX.js";import{I as ge}from"./IconUsers-BWlCuh-V.js";import{I as je}from"./IconEdit-CVyE-kLw.js";/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ve=v("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fe=v("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye=v("outline","chevrons-left","IconChevronsLeft",[["path",{d:"M11 7l-5 5l5 5",key:"svg-0"}],["path",{d:"M17 7l-5 5l5 5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var me=v("outline","chevrons-right","IconChevronsRight",[["path",{d:"M7 7l5 5l-5 5",key:"svg-0"}],["path",{d:"M13 7l5 5l-5 5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G=v("outline","hierarchy-3","IconHierarchy3",[["path",{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M12 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M20 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-4"}],["path",{d:"M16 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-5"}],["path",{d:"M5 17l2 -3",key:"svg-6"}],["path",{d:"M9 10l2 -3",key:"svg-7"}],["path",{d:"M13 7l2 3",key:"svg-8"}],["path",{d:"M17 14l2 3",key:"svg-9"}],["path",{d:"M15 14l-2 3",key:"svg-10"}],["path",{d:"M9 14l2 3",key:"svg-11"}]]);const H=l=>{const u=()=>e.jsx(ye,{size:24}),f=()=>e.jsx(ve,{size:24}),t=()=>e.jsx(fe,{size:24}),y=()=>e.jsx(me,{size:24}),s=()=>e.jsx(K,{size:24});return e.jsx(i.Root,{...l,style:{overflowX:"auto",whiteSpace:"nowrap"},children:e.jsxs(k,{gap:8,style:{display:"inline-flex",flexWrap:"nowrap"},h:52,children:[e.jsx(i.First,{icon:u}),e.jsx(i.Previous,{icon:f}),e.jsx(i.Items,{dotsIcon:s}),e.jsx(i.Next,{icon:t}),e.jsx(i.Last,{icon:y})]})})},Ae=l=>{const[u,f]=c.useState(l.search||""),[t,y]=c.useState({key:l.sort_key||"",direction:l.sort_direction||"asc"}),[s,_]=c.useState(l.filter_key||""),[S,w]=c.useState(l.filter_value||""),[p,M]=c.useState(String(l.per_page)||"10"),[A,{open:V,close:X}]=ee(!1);c.useEffect(()=>{f(l.search||""),y({key:l.sort_key||"",direction:l.sort_direction||"asc"}),_(l.filter_key||""),w(l.filter_value||""),M(String(l.per_page)||"10")},[l.search,l.sort_key,l.sort_direction,l.filter_key,l.filter_value,l.per_page]);const x=a=>{d.get(route("users.index"),{page:1,search:u,sort_key:t.key,sort_direction:t.direction,filter_key:s,filter_value:S,per_page:Number(p),...a})},P=a=>{f(a),x({search:a})},m=(a,g)=>{y({key:a,direction:g}),x({sort_key:a,sort_direction:g})},b=(a,g)=>{_(a),w(g),x({filter_key:a,filter_value:g})},D=a=>{M(a),x({per_page:Number(a)})},z=a=>{x({page:a})},W=a=>{console.log(a),d.get(route("users.edit",{user:a.id}))},q=a=>{console.log(a),confirm("Are you sure you want to restore this user?")&&d.patch(route("users.restore",a.id))},J=a=>{confirm("Are you sure you want to delete this user?")&&d.delete(route("users.destroy",a))};return e.jsxs(ae,{title:l.title,user:l.auth.user,notification:l.notification,children:[e.jsx(le,{position:{bottom:16,left:16},style:{zIndex:2},display:{base:"block",lg:"none"},children:e.jsx(F,{label:"Settings Search",children:e.jsx(C,{bg:"white",onClick:V,variant:"outline",children:e.jsx(de,{})})})}),e.jsx(O,{opened:A,onClose:X,size:"xs",centered:!0,withCloseButton:!1,children:e.jsxs(I,{gap:32,children:[e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Search"}),e.jsx(R,{leftSection:e.jsx(L,{}),placeholder:"Search by name or email...",value:u,onChange:a=>P(a.target.value)})]}),e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Sort"}),e.jsx(n,{clearable:!0,leftSection:e.jsx(Q,{}),placeholder:"Sort by...",value:t.key,data:[{label:"Full Name",value:"full_name"},{label:"Email",value:"email"},{label:"Role",value:"role"},{label:"Created At",value:"created_at"}],onChange:a=>m(a,t.direction)}),t.key&&e.jsx(n,{leftSection:t.direction==="asc"?e.jsx(B,{}):e.jsx(E,{}),placeholder:"Direction...",value:t.direction,data:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],onChange:a=>m(t.key,a)})]}),e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Filter"}),e.jsx(n,{clearable:!0,leftSection:e.jsx(N,{}),placeholder:"Filter by...",value:s,data:[{label:"Role",value:"role"},{label:"Status",value:"status"}],onChange:a=>b(a,"")}),s&&e.jsx(n,{clearable:!0,leftSection:s==="role"?e.jsx(G,{}):e.jsx(U,{}),placeholder:s==="role"?"Select role...":"Select status...",value:S,data:s==="role"?[{label:"Project Manager",value:"Project Manager"},{label:"Developer",value:"Developer"},{label:"Quality Assurance",value:"Quality Assurance"}]:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:a=>b(s,a),mt:"sm"})]}),e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Items per page"}),e.jsx(n,{clearable:!1,leftSection:e.jsx(T,{}),placeholder:"Select items per page...",value:p,data:[{label:"10",value:"10"},{label:"20",value:"20"},{label:"30",value:"30"},{label:"40",value:"40"},{label:"50",value:"50"}],onChange:D})]})]})}),e.jsxs(te,{justify:"space-between",align:"start",gap:16,children:[e.jsx(ce,{title:"Users",description:"Manage users with search, sort, filter, and customizable pagination."}),l.auth.user.role==="Admin"&&e.jsxs(e.Fragment,{children:[e.jsx(F,{label:"Create Users",children:e.jsx(C,{display:{base:"block",xs:"none"},onClick:()=>d.get(route("users.create")),children:e.jsx($,{})})}),e.jsx(Y,{leftSection:e.jsx($,{}),display:{base:"none",xs:"block"},onClick:()=>d.get(route("users.create")),children:"Create User"})]})]}),e.jsxs(j,{gutter:32,children:[e.jsx(j.Col,{span:{base:0,lg:3},children:e.jsxs(I,{gap:32,pos:"sticky",top:112,display:{base:"none",lg:A?"none":"flex"},children:[e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Search"}),e.jsx(R,{leftSection:e.jsx(L,{}),placeholder:"Search by name or email...",value:u,onChange:a=>P(a.target.value)})]}),e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Sort"}),e.jsx(n,{clearable:!0,leftSection:e.jsx(Q,{}),placeholder:"Sort by...",value:t.key,data:[{label:"Full Name",value:"full_name"},{label:"Email",value:"email"},{label:"Role",value:"role"},{label:"Created At",value:"created_at"}],onChange:a=>m(a,t.direction)}),t.key&&e.jsx(n,{leftSection:t.direction==="asc"?e.jsx(B,{}):e.jsx(E,{}),placeholder:"Direction...",value:t.direction,data:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],onChange:a=>m(t.key,a)})]}),e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Filter"}),e.jsx(n,{clearable:!0,leftSection:e.jsx(N,{}),placeholder:"Filter by...",value:s,data:[{label:"Role",value:"role"},{label:"Status",value:"status"}],onChange:a=>b(a,"")}),s&&e.jsx(n,{clearable:!0,leftSection:s==="role"?e.jsx(G,{}):e.jsx(U,{}),placeholder:s==="role"?"Select role...":"Select status...",value:S,data:s==="role"?[{label:"Project Manager",value:"Project Manager"},{label:"Developer",value:"Developer"},{label:"Quality Assurance",value:"Quality Assurance"}]:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:a=>b(s,a),mt:"sm"})]}),e.jsxs(o,{children:[e.jsx(r,{fw:500,children:"Items per page"}),e.jsx(n,{clearable:!1,leftSection:e.jsx(T,{}),placeholder:"Select items per page...",value:p,data:[{label:"10",value:"10"},{label:"20",value:"20"},{label:"30",value:"30"},{label:"40",value:"40"},{label:"50",value:"50"}],onChange:D})]})]})}),e.jsxs(j.Col,{span:{base:12,lg:9},children:[e.jsxs(k,{justify:"space-between",align:"center",mb:16,children:[e.jsxs(r,{size:"sm",children:["Showing ",l.users.from," – ",l.users.to," of"," ",l.users.total]}),e.jsx(H,{value:l.users.current_page,onChange:z,total:l.users.last_page,radius:"xs"})]}),l.users.data.length===0?e.jsxs(I,{align:"center",py:32,spacing:"xs",children:[e.jsx(ge,{size:48,color:"gray"}),e.jsx(se,{order:3,c:"gray",children:"No users available yet."})]}):e.jsx(j,{gutter:"lg",children:l.users.data.map(a=>e.jsx(j.Col,{span:{base:6,sm:4,md:3},children:e.jsxs(he,{shadow:"xs",radius:"md",withBorder:!0,children:[e.jsx(re,{children:e.jsx(ue,{radius:16,style:{zIndex:1},color:a.deleted_at?"red":"green",inline:!0,size:16,offset:7,position:"bottom-end",children:e.jsx(Z,{size:48,src:a.profile_photo_path||void 0,children:!a.profile_photo_path&&ne(a.full_name)})})}),e.jsx(r,{fw:500,align:"center",mt:16,lineClamp:1,children:a.full_name}),e.jsx(r,{align:"center",c:"ghost",size:"sm",mb:16,lineClamp:1,children:a.email}),e.jsx(oe,{mx:"auto",color:a.role==="Project Manager"?"orange":a.role==="Developer"?"lime":a.role==="Quality Assurance"?"cyan":"gray",variant:"light",children:a.role.replace("_"," ")}),e.jsxs(h,{shadow:"xs",withArrow:!0,arrowPosition:"center",children:[e.jsx(h.Target,{children:e.jsx(C,{w:"100%",mt:16,variant:"subtle",color:"gray",children:e.jsx(K,{})})}),e.jsxs(h.Dropdown,{p:0,children:[e.jsx(h.Item,{h:48,color:"yellow",leftSection:e.jsx(je,{}),onClick:()=>W(a),children:"Edit"}),a.deleted_at?e.jsx(h.Item,{h:48,color:"green",leftSection:e.jsx(xe,{}),onClick:()=>q(a),children:"Activate"}):e.jsx(h.Item,{h:48,color:"red",leftSection:e.jsx(ie,{}),onClick:()=>J(a),children:"Deactivate"})]})]})]})},a.id))}),e.jsxs(k,{justify:"space-between",align:"center",mt:16,children:[e.jsxs(r,{size:"sm",children:["Showing ",l.users.from," – ",l.users.to," of"," ",l.users.total]}),e.jsx(H,{value:l.users.current_page,onChange:z,total:l.users.last_page,radius:"xs"})]})]})]})]})};export{Ae as default};
